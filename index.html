<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malaria Heroes: Save Nyanja Village</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&family=Quicksand:wght@400;500;600;700&family=Inter:wght@400;500;600;700&family=Noto+Sans+Devanagari:wght@400;500;600;700&display=swap');

        :root {
            --hero-blue: #2563eb;
            --victory-green: #16a34a;
            --warning-amber: #f59e0b;
            --danger-red: #ef4444;
            --neutral-slate: #64748b;
            --light-background: #f8fafc;
            --white: #ffffff;
            --clinic-red: #dc2626;
            --school-blue: #3b82f6;
            --market-green: #059669;
            --homes-orange: #ea580c;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: #1f2937;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 50%, #f0fdf4 100%);
            min-height: 100vh;
        }

        /* Language Toggle */
        .language-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            background: white;
            border-radius: 25px;
            padding: 4px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border: 2px solid var(--hero-blue);
        }

        .lang-btn {
            padding: 8px 16px;
            border: none;
            background: transparent;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            color: var(--neutral-slate);
        }

        .lang-btn.active {
            background: var(--hero-blue);
            color: white;
        }

        .lang-btn:hover:not(.active) {
            background: var(--light-background);
        }

        /* Hindi Text Styling */
        .hindi-text {
            font-family: 'Noto Sans Devanagari', sans-serif;
            font-weight: 500;
        }

        /* Hide inactive language content */
        .lang-content {
            display: none;
        }

        .lang-content.active {
            display: block;
        }

        /* Header Styles */
        .game-header {
            background: linear-gradient(135deg, var(--hero-blue), #1d4ed8);
            color: white;
            padding: 1.5rem 0;
            text-align: center;
            box-shadow: 0 4px 20px rgba(37, 99, 235, 0.3);
        }

        .game-title {
            font-family: 'Fredoka', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .game-subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            font-weight: 500;
        }

        /* Stats Bar */
        .stats-container {
            background: white;
            padding: 1rem 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .stats-grid {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            padding: 0 2rem;
        }

        .stat-card {
            background: var(--light-background);
            padding: 1rem;
            border-radius: 12px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            border-color: var(--hero-blue);
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.1);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 800;
            color: var(--hero-blue);
            font-family: 'Fredoka', sans-serif;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--neutral-slate);
            font-weight: 600;
            margin-top: 0.25rem;
        }

        /* Village Map */
        .village-container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
        }

        .village-map {
            background: linear-gradient(135deg, var(--victory-green) 0%, #22c55e 100%);
            border-radius: 24px;
            padding: 2rem;
            position: relative;
            min-height: 500px;
            box-shadow: 0 10px 30px rgba(22, 163, 74, 0.3);
            border: 4px solid rgba(255, 255, 255, 0.2);
        }

        .map-title {
            text-align: center;
            color: white;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 2rem;
            font-family: 'Fredoka', sans-serif;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .location {
            position: absolute;
            width: 100px;
            height: 100px;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 4px solid white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .location:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
        }

        .location.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            filter: grayscale(100%);
        }

        .location.completed {
            border-color: var(--victory-green);
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
        }

        .location.completed::after {
            content: "‚úì";
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--victory-green);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.1rem;
            border: 3px solid white;
        }

        .location-icon {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .location-name {
            font-weight: 700;
            font-size: 0.75rem;
            text-align: center;
            line-height: 1.2;
        }

        .priority-badge {
            position: absolute;
            top: -8px;
            left: -8px;
            background: var(--danger-red);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1rem;
            border: 3px solid white;
        }

        /* Location positioning */
        .clinic { top: 80px; left: 80px; }
        .clinic .location-icon { color: var(--clinic-red); }

        .school { top: 200px; right: 80px; }
        .school .location-icon { color: var(--school-blue); }

        .market { bottom: 80px; left: 120px; }
        .market .location-icon { color: var(--market-green); }

        .homes { top: 120px; left: 300px; }
        .homes .location-icon { color: var(--homes-orange); }

        /* Mission Panel */
        .mission-panel {
            background: white;
            border-radius: 24px;
            padding: 2rem;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            height: fit-content;
            border: 2px solid var(--hero-blue);
        }

        .panel-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: var(--hero-blue);
            text-align: center;
            font-family: 'Fredoka', sans-serif;
        }

        .emergency-alert {
            background: linear-gradient(135deg, #fef2f2, #fee2e2);
            border: 2px solid var(--danger-red);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .alert-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .alert-icon {
            font-size: 1.5rem;
        }

        .alert-title {
            font-weight: 700;
            color: var(--danger-red);
            font-size: 1.1rem;
        }

        .current-mission {
            background: var(--light-background);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .mission-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .mission-title {
            font-weight: 700;
            color: var(--hero-blue);
            font-size: 1.1rem;
        }

        /* Modal System */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            border-radius: 24px;
            padding: 2rem;
            max-width: 900px;
            width: 95vw;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            transform: scale(0.9);
            transition: all 0.3s ease;
        }

        .modal.active .modal-content {
            transform: scale(1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--light-background);
        }

        .modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--hero-blue);
            font-family: 'Fredoka', sans-serif;
        }

        .close-btn {
            background: var(--danger-red);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            transform: scale(1.1);
        }

        /* Mission Content */
        .mission-intro {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border: 2px solid var(--hero-blue);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .npc-dialogue {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .npc-avatar {
            width: 80px;
            height: 80px;
            background: var(--hero-blue);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
            flex-shrink: 0;
        }

        .dialogue-bubble {
            background: white;
            border-radius: 16px;
            padding: 1.5rem;
            flex: 1;
            border: 2px solid var(--light-background);
            position: relative;
        }

        .dialogue-bubble::before {
            content: '';
            position: absolute;
            left: -10px;
            top: 30px;
            width: 0;
            height: 0;
            border-top: 10px solid transparent;
            border-right: 12px solid white;
            border-bottom: 10px solid transparent;
        }

        .npc-name {
            font-weight: 700;
            color: var(--hero-blue);
            margin-bottom: 0.5rem;
        }

        /* Challenge Section */
        .challenge-section {
            background: var(--light-background);
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .challenge-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--hero-blue);
            margin-bottom: 1rem;
            text-align: center;
            font-family: 'Fredoka', sans-serif;
        }

        .challenge-description {
            color: var(--neutral-slate);
            margin-bottom: 2rem;
            text-align: center;
            line-height: 1.6;
        }

        /* Option Grids */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .option-card {
            background: white;
            border: 2px solid var(--light-background);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .option-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .option-card.selected {
            border-color: var(--hero-blue);
            background: linear-gradient(135deg, #f0f9ff, #dbeafe);
        }

        .option-card.correct {
            border-color: var(--victory-green);
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
        }

        .option-card.incorrect {
            border-color: var(--danger-red);
            background: linear-gradient(135deg, #fef2f2, #fee2e2);
        }

        .option-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .option-name {
            font-weight: 600;
            color: #1f2937;
            font-size: 0.95rem;
        }

        /* Student Grid for School */
        .student-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .student-card {
            background: white;
            border: 2px solid var(--light-background);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .student-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .student-card.protected {
            border-color: var(--victory-green);
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
        }

        .student-card.high-risk {
            border-color: var(--danger-red);
        }

        .student-card.medium-risk {
            border-color: var(--warning-amber);
        }

        .student-card.low-risk {
            border-color: var(--victory-green);
        }

        .bed-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .student-name {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .student-age {
            font-size: 0.85rem;
            color: var(--neutral-slate);
        }

        /* Compound Map for Homes */
        .compound-container {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            position: relative;
            height: 500px;
            border: 3px solid var(--warning-amber);
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(59, 130, 246, 0.1) 20px, transparent 20px),
                radial-gradient(circle at 80% 20%, rgba(34, 197, 94, 0.1) 15px, transparent 15px),
                radial-gradient(circle at 60% 70%, rgba(245, 158, 11, 0.1) 25px, transparent 25px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .compound-container:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }

        .compound-title {
            text-align: center;
            font-weight: 700;
            color: var(--homes-orange);
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .breeding-progress {
            display: flex;
            justify-content: space-around;
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            padding: 1.5rem;
            border-radius: 15px;
            margin: 1.5rem 0;
            border: 2px solid var(--warning-amber);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .breeding-progress:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .progress-item {
            text-align: center;
        }

        .progress-number {
            font-size: 1.8rem;
            font-weight: 800;
            display: block;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .progress-number:hover {
            transform: scale(1.1);
        }

        .progress-number.found { color: var(--victory-green); }
        .progress-number.attempts { color: var(--danger-red); }
        .progress-number.target { color: var(--warning-amber); }
        .progress-number.score { color: var(--hero-blue); }

        .progress-label {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--neutral-slate);
        }

        .breeding-site {
            position: absolute;
            width: 65px;
            height: 65px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.8rem;
            border-radius: 18px;
            background: rgba(255, 255, 255, 0.9);
            border: 3px solid var(--light-background);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(10px);
        }

        .breeding-site:hover {
            transform: scale(1.15);
            border-color: var(--hero-blue);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.25);
            background: rgba(255, 255, 255, 1);
        }

        .breeding-site.correct {
            border-color: var(--victory-green);
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            animation: correctPulse 1s ease-out;
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.3);
        }

        .breeding-site.incorrect {
            border-color: var(--danger-red);
            background: linear-gradient(135deg, #fecaca, #fca5a5);
            animation: incorrectShake 0.6s ease-out;
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
        }

        @keyframes correctPulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(22, 163, 74, 0.7); }
            70% { transform: scale(1.2); box-shadow: 0 0 0 10px rgba(22, 163, 74, 0); }
            100% { transform: scale(1.15); box-shadow: 0 0 0 0 rgba(22, 163, 74, 0); }
        }

        @keyframes incorrectShake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        /* Breeding site positions */
        .site-1 { top: 60px; left: 80px; }
        .site-2 { top: 120px; right: 100px; }
        .site-3 { bottom: 140px; left: 60px; }
        .site-4 { bottom: 80px; right: 120px; }
        .site-5 { top: 200px; left: 150px; }
        .site-6 { bottom: 200px; right: 80px; }
        .site-7 { top: 160px; left: 250px; }
        .site-8 { bottom: 120px; left: 220px; }
        .site-9 { top: 100px; right: 200px; }
        .site-10 { top: 240px; right: 150px; }
        .site-11 { bottom: 160px; left: 180px; }
        .site-12 { top: 80px; left: 180px; }

        /* Help Panel */
        .help-panel {
            background: linear-gradient(135deg, #eff6ff, #dbeafe);
            border: 2px solid var(--hero-blue);
            border-radius: 20px;
            padding: 2.5rem;
            margin: 2rem 0;
            display: none;
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.15);
            transition: all 0.3s ease;
        }

        .help-panel.show {
            display: block;
            animation: slideDown 0.5s ease;
            box-shadow: 0 12px 35px rgba(37, 99, 235, 0.25);
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .help-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--hero-blue);
            margin-bottom: 1rem;
        }

        /* Action Buttons */
        .action-btn {
            background: linear-gradient(135deg, var(--victory-green), #16a34a);
            color: white;
            border: none;
            padding: 1.4rem 3rem;
            border-radius: 20px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 2rem auto;
            box-shadow: 0 6px 20px rgba(22, 163, 74, 0.3);
            font-family: 'Quicksand', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(22, 163, 74, 0.4);
            background: linear-gradient(135deg, #16a34a, var(--victory-green));
        }

        .action-btn:disabled {
            background: var(--neutral-slate);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Feedback Panels */
        .feedback-panel {
            background: var(--light-background);
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
            display: none;
        }

        .feedback-panel.show {
            display: block;
            animation: slideDown 0.5s ease;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .feedback-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .feedback-icon.success {
            background: var(--victory-green);
            color: white;
        }

        .feedback-icon.warning {
            background: var(--warning-amber);
            color: white;
        }

        .feedback-icon.error {
            background: var(--danger-red);
            color: white;
        }

        .feedback-title {
            font-size: 1.4rem;
            font-weight: 700;
        }

        .feedback-title.success { color: var(--victory-green); }
        .feedback-title.warning { color: var(--warning-amber); }
        .feedback-title.error { color: var(--danger-red); }

        /* Completion Modal */
        .completion-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
        }

        .completion-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .completion-content {
            background: white;
            border-radius: 24px;
            padding: 3rem;
            max-width: 800px;
            width: 95vw;
            text-align: center;
            transform: scale(0.8);
            transition: all 0.5s ease;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .completion-modal.show .completion-content {
            transform: scale(1);
        }

        .completion-title {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--victory-green);
            margin-bottom: 1rem;
            font-family: 'Fredoka', sans-serif;
        }

        .completion-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .completion-stat {
            background: var(--light-background);
            border-radius: 16px;
            padding: 2rem;
        }

        .completion-number {
            font-size: 3rem;
            font-weight: 800;
            color: var(--hero-blue);
            font-family: 'Fredoka', sans-serif;
        }

        .completion-label {
            font-weight: 600;
            color: var(--neutral-slate);
        }

        /* Certificate Styles */
        .certificate-modal {
            z-index: 3000;
        }

        .certificate-container {
            border: 4px solid var(--hero-blue);
            border-radius: 16px;
            padding: 2rem;
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            position: relative;
            min-height: 400px;
        }

        .certificate-decorations {
            position: absolute;
            font-size: 2rem;
        }

        .cert-trophy { top: 10px; right: 10px; }
        .cert-globe { top: 10px; left: 10px; }
        .cert-mosquito { bottom: 10px; right: 10px; }
        .cert-medical { bottom: 10px; left: 10px; }

        .certificate-title {
            color: var(--hero-blue);
            font-size: 2.5rem;
            margin: 1rem 0;
            font-family: 'Fredoka', sans-serif;
        }

        .certificate-subtitle {
            color: var(--victory-green);
            font-family: 'Quicksand', sans-serif;
            margin: 1rem 0;
            font-size: 1.5rem;
        }

        .certificate-name {
            color: var(--hero-blue);
            font-size: 2rem;
            margin: 1rem 0;
            border-bottom: 2px solid var(--hero-blue);
            display: inline-block;
            padding: 0.5rem 1rem;
            min-width: 300px;
        }

        .certificate-stats {
            display: flex;
            justify-content: space-around;
            margin: 2rem 0;
            background: #f1f5f9;
            padding: 1rem;
            border-radius: 12px;
        }

        .cert-stat {
            text-align: center;
        }

        .cert-stat-number {
            font-size: 2rem;
            font-weight: bold;
            display: block;
        }

        .cert-stat-number.lives { color: var(--victory-green); }
        .cert-stat-number.points { color: var(--hero-blue); }
        .cert-stat-number.success { color: var(--warning-amber); }

        .cert-stat-label {
            font-size: 0.9rem;
            color: var(--neutral-slate);
        }

        .certificate-footer {
            margin-top: 2rem;
            font-size: 0.9rem;
            color: var(--neutral-slate);
        }

        .certificate-signature {
            margin-top: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
        }

        .signature-line {
            border-top: 2px solid var(--hero-blue);
            width: 200px;
            text-align: center;
            padding-top: 0.5rem;
        }

        .signature-title {
            font-size: 0.8rem;
            color: var(--neutral-slate);
        }

        .name-input {
            padding: 0.75rem 1rem;
            border: 2px solid var(--hero-blue);
            border-radius: 8px;
            font-size: 1rem;
            width: 300px;
            text-align: center;
            margin: 1rem 0;
        }

        .cert-buttons {
            margin-top: 1rem;
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .cert-btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cert-btn.generate {
            background: var(--hero-blue);
            color: white;
        }

        .cert-btn.download {
            background: var(--victory-green);
            color: white;
        }

        .cert-btn.close {
            background: var(--neutral-slate);
            color: white;
        }

        .cert-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .village-container {
                grid-template-columns: 1fr;
                gap: 1rem;
                padding: 1rem;
            }

            .village-map {
                min-height: 400px;
            }

            .location {
                width: 80px;
                height: 80px;
            }

            .location-icon {
                font-size: 2rem;
            }

            .breeding-site {
                width: 50px;
                height: 50px;
                font-size: 1.8rem;
            }

            .compound-container {
                height: 400px;
            }

            .options-grid {
                grid-template-columns: 1fr;
            }

            .student-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }

            .cert-buttons {
                flex-direction: column;
                align-items: center;
            }

            .certificate-name {
                font-size: 1.5rem;
                min-width: 250px;
            }

            .certificate-stats {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Language Toggle -->
    <div class="language-toggle">
        <button class="lang-btn active" onclick="switchLanguage('en')" data-lang="en">üá¨üáß English</button>
        <button class="lang-btn" onclick="switchLanguage('hi')" data-lang="hi">üáÆüá≥ ‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button>
    </div>

    <!-- Game Header -->
    <header class="game-header">
        <!-- English Header -->
        <div class="lang-content active" data-lang="en">
            <h1 class="game-title">üåç Malaria Heroes</h1>
            <p class="game-subtitle">Emergency Response Training ‚Ä¢ Save Nyanja Village</p>
        </div>
        <!-- Hindi Header -->
        <div class="lang-content hindi-text" data-lang="hi">
            <h1 class="game-title">üåç ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§µ‡•Ä‡§∞</h1>
            <p class="game-subtitle">‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§™‡•ç‡§∞‡§∂‡§ø‡§ï‡•ç‡§∑‡§£ ‚Ä¢ ‡§®‡•ç‡§Ø‡§æ‡§Ç‡§ú‡§æ ‡§ó‡§æ‡§Ç‡§µ ‡§ï‡•ã ‡§¨‡§ö‡§æ‡§è‡§Ç</p>
        </div>
    </header>

    <!-- Stats Container -->
    <div class="stats-container">
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="livesProtected">0</div>
                <!-- English -->
                <div class="stat-label lang-content active" data-lang="en">Lives Protected</div>
                <!-- Hindi -->
                <div class="stat-label lang-content hindi-text" data-lang="hi">‡§∏‡§Ç‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§ú‡•Ä‡§µ‡§®</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="knowledgePoints">0</div>
                <!-- English -->
                <div class="stat-label lang-content active" data-lang="en">Knowledge Points</div>
                <!-- Hindi -->
                <div class="stat-label lang-content hindi-text" data-lang="hi">‡§ú‡•ç‡§û‡§æ‡§® ‡§Ö‡§Ç‡§ï</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="missionsCompleted">0</div>
                <!-- English -->
                <div class="stat-label lang-content active" data-lang="en">Missions Completed</div>
                <!-- Hindi -->
                <div class="stat-label lang-content hindi-text" data-lang="hi">‡§™‡•Ç‡§∞‡•ç‡§£ ‡§Æ‡§ø‡§∂‡§®</div>
            </div>
        </div>
    </div>

    <!-- Village Container -->
    <div class="village-container">
        <!-- Village Map -->
        <div class="village-map">
            <!-- English Title -->
            <h2 class="map-title lang-content active" data-lang="en">üèòÔ∏è Nyanja Village Emergency Response</h2>
            <!-- Hindi Title -->
            <h2 class="map-title lang-content hindi-text" data-lang="hi">üèòÔ∏è ‡§®‡•ç‡§Ø‡§æ‡§Ç‡§ú‡§æ ‡§ó‡§æ‡§Ç‡§µ ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ</h2>
            
            <!-- Emergency Clinic -->
            <div class="location clinic" onclick="openMission('clinic')">
                <div class="location-icon">üè•</div>
                <!-- English -->
                <div class="location-name lang-content active" data-lang="en">Emergency<br>Clinic</div>
                <!-- Hindi -->
                <div class="location-name lang-content hindi-text" data-lang="hi">‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§®<br>‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï</div>
                <div class="priority-badge">1</div>
            </div>
            
            <!-- Village School -->
            <div class="location school disabled" id="school-location" onclick="openMission('school')">
                <div class="location-icon">üè´</div>
                <!-- English -->
                <div class="location-name lang-content active" data-lang="en">Village<br>School</div>
                <!-- Hindi -->
                <div class="location-name lang-content hindi-text" data-lang="hi">‡§ó‡§æ‡§Ç‡§µ ‡§ï‡§æ<br>‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§≤‡§Ø</div>
                <div class="priority-badge" style="display: none;">2</div>
            </div>
            
            <!-- Community Market -->
            <div class="location market disabled" id="market-location" onclick="openMission('market')">
                <div class="location-icon">üè™</div>
                <!-- English -->
                <div class="location-name lang-content active" data-lang="en">Community<br>Market</div>
                <!-- Hindi -->
                <div class="location-name lang-content hindi-text" data-lang="hi">‡§∏‡§æ‡§Æ‡•Å‡§¶‡§æ‡§Ø‡§ø‡§ï<br>‡§¨‡§æ‡§ú‡§æ‡§∞</div>
                <div class="priority-badge" style="display: none;">3</div>
            </div>
            
            <!-- Family Homes -->
            <div class="location homes disabled" id="homes-location" onclick="openMission('homes')">
                <div class="location-icon">üè†</div>
                <!-- English -->
                <div class="location-name lang-content active" data-lang="en">Family<br>Compounds</div>
                <!-- Hindi -->
                <div class="location-name lang-content hindi-text" data-lang="hi">‡§™‡§æ‡§∞‡§ø‡§µ‡§æ‡§∞‡§ø‡§ï<br>‡§™‡§∞‡§ø‡§∏‡§∞</div>
                <div class="priority-badge" style="display: none;">4</div>
            </div>
        </div>

        <!-- Mission Panel -->
        <div class="mission-panel">
            <!-- English Panel -->
            <div class="lang-content active" data-lang="en">
                <h2 class="panel-title">üìã Mission Control</h2>
                
                <div class="emergency-alert">
                    <div class="alert-header">
                        <span class="alert-icon">üö®</span>
                        <h3 class="alert-title">Critical Health Emergency</h3>
                    </div>
                    <p>A severe malaria outbreak is spreading rapidly through Nyanja Village. Latest WHO 2024 data shows 597,000 malaria deaths globally with 263 million cases. As a medical expert, you must use scientific knowledge and evidence-based strategies to save lives and prevent further transmission.</p>
                </div>
                
                <div class="current-mission">
                    <div class="mission-header">
                        <span class="alert-icon">üéØ</span>
                        <h3 class="mission-title">Current Mission</h3>
                    </div>
                    <p id="current-mission-text">Visit the Emergency Clinic where a critically ill 8-year-old patient needs immediate medical diagnosis. Lives depend on your expertise!</p>
                </div>
            </div>

            <!-- Hindi Panel -->
            <div class="lang-content hindi-text" data-lang="hi">
                <h2 class="panel-title">üìã ‡§Æ‡§ø‡§∂‡§® ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£</h2>
                
                <div class="emergency-alert">
                    <div class="alert-header">
                        <span class="alert-icon">üö®</span>
                        <h3 class="alert-title">‡§ó‡§Ç‡§≠‡•Ä‡§∞ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤</h3>
                    </div>
                    <p>‡§®‡•ç‡§Ø‡§æ‡§Ç‡§ú‡§æ ‡§ó‡§æ‡§Ç‡§µ ‡§Æ‡•á‡§Ç ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§ï‡§æ ‡§ó‡§Ç‡§≠‡•Ä‡§∞ ‡§™‡•ç‡§∞‡§ï‡•ã‡§™ ‡§§‡•á‡§ú‡•Ä ‡§∏‡•á ‡§´‡•à‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‡§®‡§µ‡•Ä‡§®‡§§‡§Æ WHO 2024 ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á 263 ‡§Æ‡§ø‡§≤‡§ø‡§Ø‡§® ‡§Æ‡§æ‡§Æ‡§≤‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§• ‡§µ‡§ø‡§∂‡•ç‡§µ‡§µ‡•ç‡§Ø‡§æ‡§™‡•Ä ‡§∏‡•ç‡§§‡§∞ ‡§™‡§∞ 597,000 ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§Æ‡•É‡§§‡•ç‡§Ø‡•Å ‡§¶‡§∞‡•ç‡§∂‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§è‡§ï ‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§µ‡§ø‡§∂‡•á‡§∑‡§ú‡•ç‡§û ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç, ‡§Ü‡§™‡§ï‡•ã ‡§µ‡•à‡§ú‡•ç‡§û‡§æ‡§®‡§ø‡§ï ‡§ú‡•ç‡§û‡§æ‡§® ‡§î‡§∞ ‡§∏‡§æ‡§ï‡•ç‡§∑‡•ç‡§Ø-‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§∞‡§£‡§®‡•Ä‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§ï‡•á ‡§ú‡•Ä‡§µ‡§® ‡§¨‡§ö‡§æ‡§®‡§æ ‡§î‡§∞ ‡§Ü‡§ó‡•á ‡§ï‡•á ‡§∏‡§Ç‡§ö‡§∞‡§£ ‡§ï‡•ã ‡§∞‡•ã‡§ï‡§®‡§æ ‡§π‡•ã‡§ó‡§æ‡•§</p>
                </div>
                
                <div class="current-mission">
                    <div class="mission-header">
                        <span class="alert-icon">üéØ</span>
                        <h3 class="mission-title">‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§Æ‡§ø‡§∂‡§®</h3>
                    </div>
                    <p id="current-mission-text-hi">‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§è‡§Ç ‡§ú‡§π‡§æ‡§Ç ‡§è‡§ï ‡§ó‡§Ç‡§≠‡•Ä‡§∞ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§¨‡•Ä‡§Æ‡§æ‡§∞ 8 ‡§µ‡§∞‡•ç‡§∑‡•Ä‡§Ø ‡§∞‡•ã‡§ó‡•Ä ‡§ï‡•ã ‡§§‡§§‡•ç‡§ï‡§æ‡§≤ ‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§®‡§ø‡§¶‡§æ‡§® ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à‡•§ ‡§ú‡•Ä‡§µ‡§® ‡§Ü‡§™‡§ï‡•Ä ‡§µ‡§ø‡§∂‡•á‡§∑‡§ú‡•ç‡§û‡§§‡§æ ‡§™‡§∞ ‡§®‡§ø‡§∞‡•ç‡§≠‡§∞ ‡§π‡•à!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Mission Modal -->
    <div class="modal" id="mission-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title">Mission Details</h2>
                <button class="close-btn" onclick="closeMissionModal()">√ó</button>
            </div>
            <div id="modal-content">
                <!-- Dynamic content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Completion Modal -->
    <div class="completion-modal" id="completion-modal">
        <div class="completion-content">
            <!-- English Completion -->
            <div class="lang-content active" data-lang="en">
                <h2 class="completion-title">üèÜ Mission Accomplished!</h2>
                <p>Congratulations! You've successfully helped protect Nyanja Village from malaria using scientific evidence and proven medical strategies.</p>
                
                <div class="completion-stats">
                    <div class="completion-stat">
                        <div class="completion-number" id="final-lives">0</div>
                        <div class="completion-label">Lives Protected</div>
                    </div>
                    <div class="completion-stat">
                        <div class="completion-number" id="final-points">0</div>
                        <div class="completion-label">Knowledge Points</div>
                    </div>
                    <div class="completion-stat">
                        <div class="completion-number">100%</div>
                        <div class="completion-label">Village Protected</div>
                    </div>
                </div>
                
                <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                    <button class="action-btn" onclick="showCertificateModal()" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
                        üéì Get Certificate
                    </button>
                    <button class="action-btn" onclick="restartGame()">üéÆ Play Again</button>
                </div>
            </div>

            <!-- Hindi Completion -->
            <div class="lang-content hindi-text" data-lang="hi">
                <h2 class="completion-title">üèÜ ‡§Æ‡§ø‡§∂‡§® ‡§™‡•Ç‡§∞‡•ç‡§£!</h2>
                <p>‡§¨‡§ß‡§æ‡§à ‡§π‡•ã! ‡§Ü‡§™‡§®‡•á ‡§µ‡•à‡§ú‡•ç‡§û‡§æ‡§®‡§ø‡§ï ‡§∏‡§æ‡§ï‡•ç‡§∑‡•ç‡§Ø ‡§î‡§∞ ‡§∏‡§ø‡§¶‡•ç‡§ß ‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§∞‡§£‡§®‡•Ä‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§ï‡•á ‡§®‡•ç‡§Ø‡§æ‡§Ç‡§ú‡§æ ‡§ó‡§æ‡§Ç‡§µ ‡§ï‡•ã ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§∏‡•á ‡§¨‡§ö‡§æ‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ï‡•Ä ‡§π‡•à‡•§</p>
                
                <div class="completion-stats">
                    <div class="completion-stat">
                        <div class="completion-number" id="final-lives-hi">0</div>
                        <div class="completion-label">‡§∏‡§Ç‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§ú‡•Ä‡§µ‡§®</div>
                    </div>
                    <div class="completion-stat">
                        <div class="completion-number" id="final-points-hi">0</div>
                        <div class="completion-label">‡§ú‡•ç‡§û‡§æ‡§® ‡§Ö‡§Ç‡§ï</div>
                    </div>
                    <div class="completion-stat">
                        <div class="completion-number">100%</div>
                        <div class="completion-label">‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§ó‡§æ‡§Ç‡§µ</div>
                    </div>
                </div>
                
                <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                    <button class="action-btn" onclick="showCertificateModal()" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
                        üéì ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç
                    </button>
                    <button class="action-btn" onclick="restartGame()">üéÆ ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ñ‡•á‡§≤‡•á‡§Ç</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Certificate Modal -->
    <div class="modal certificate-modal" id="certificate-modal" style="display: none;">
        <div class="modal-content" style="max-width: 800px; text-align: center;">
            <div class="certificate-container" id="certificate-container">
                <div class="certificate-decorations cert-trophy">üèÜ</div>
                <div class="certificate-decorations cert-globe">üåç</div>
                <div class="certificate-decorations cert-mosquito">ü¶ü</div>
                <div class="certificate-decorations cert-medical">ü©∫</div>
                
                <!-- English Certificate -->
                <div class="lang-content active" data-lang="en">
                    <h1 class="certificate-title">Certificate of Achievement</h1>
                    <h2 class="certificate-subtitle">Malaria Heroes Training Program</h2>
                    
                    <div style="margin: 2rem 0; font-size: 1.2rem;">
                        <p style="margin: 0.5rem 0;">This certifies that</p>
                        <div class="certificate-name" id="certificate-name">Player Name</div>
                        <p style="margin: 0.5rem 0;">has successfully completed the Malaria Heroes emergency response training</p>
                    </div>
                </div>

                <!-- Hindi Certificate -->
                <div class="lang-content hindi-text" data-lang="hi">
                    <h1 class="certificate-title">‡§â‡§™‡§≤‡§¨‡•ç‡§ß‡§ø ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞</h1>
                    <h2 class="certificate-subtitle">‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§µ‡•Ä‡§∞ ‡§™‡•ç‡§∞‡§∂‡§ø‡§ï‡•ç‡§∑‡§£ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ</h2>
                    
                    <div style="margin: 2rem 0; font-size: 1.2rem;">
                        <p style="margin: 0.5rem 0;">‡§Ø‡§π ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à ‡§ï‡§ø</p>
                        <div class="certificate-name" id="certificate-name-hi">‡§ñ‡§ø‡§≤‡§æ‡§°‡§º‡•Ä ‡§ï‡§æ ‡§®‡§æ‡§Æ</div>
                        <p style="margin: 0.5rem 0;">‡§®‡•á ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§µ‡•Ä‡§∞ ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§™‡•ç‡§∞‡§∂‡§ø‡§ï‡•ç‡§∑‡§£ ‡§™‡•Ç‡§∞‡§æ ‡§ï‡§ø‡§Ø‡§æ ‡§π‡•à</p>
                    </div>
                </div>
                
                <div class="certificate-stats">
                    <div class="cert-stat">
                        <span class="cert-stat-number lives" id="certificate-lives">0</span>
                        <!-- English -->
                        <div class="cert-stat-label lang-content active" data-lang="en">Lives Protected</div>
                        <!-- Hindi -->
                        <div class="cert-stat-label lang-content hindi-text" data-lang="hi">‡§∏‡§Ç‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§ú‡•Ä‡§µ‡§®</div>
                    </div>
                    <div class="cert-stat">
                        <span class="cert-stat-number points" id="certificate-points">0</span>
                        <!-- English -->
                        <div class="cert-stat-label lang-content active" data-lang="en">Knowledge Points</div>
                        <!-- Hindi -->
                        <div class="cert-stat-label lang-content hindi-text" data-lang="hi">‡§ú‡•ç‡§û‡§æ‡§® ‡§Ö‡§Ç‡§ï</div>
                    </div>
                    <div class="cert-stat">
                        <span class="cert-stat-number success">100%</span>
                        <!-- English -->
                        <div class="cert-stat-label lang-content active" data-lang="en">Mission Success</div>
                        <!-- Hindi -->
                        <div class="cert-stat-label lang-content hindi-text" data-lang="hi">‡§Æ‡§ø‡§∂‡§® ‡§∏‡§´‡§≤‡§§‡§æ</div>
                    </div>
                </div>
                
                <div class="certificate-footer">
                    <!-- English -->
                    <div class="lang-content active" data-lang="en">
                        <p>Issued on <span id="certificate-date"></span></p>
                        <p style="margin-top: 0.5rem;">WHO Malaria Prevention Guidelines ‚Ä¢ Evidence-Based Training</p>
                    </div>
                    <!-- Hindi -->
                    <div class="lang-content hindi-text" data-lang="hi">
                        <p>‡§ú‡§æ‡§∞‡•Ä ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§§‡§ø‡§•‡§ø <span id="certificate-date-hi"></span></p>
                        <p style="margin-top: 0.5rem;">WHO ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§∞‡•ã‡§ï‡§•‡§æ‡§Æ ‡§¶‡§ø‡§∂‡§æ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂ ‚Ä¢ ‡§∏‡§æ‡§ï‡•ç‡§∑‡•ç‡§Ø-‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§™‡•ç‡§∞‡§∂‡§ø‡§ï‡•ç‡§∑‡§£</p>
                    </div>
                </div>
                
                <div class="certificate-signature">
                    <div class="signature-line">
                        <!-- English -->
                        <div class="signature-title lang-content active" data-lang="en">Program Director</div>
                        <!-- Hindi -->
                        <div class="signature-title lang-content hindi-text" data-lang="hi">‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§®‡§ø‡§¶‡•á‡§∂‡§ï</div>
                    </div>
                </div>
            </div>
            
            <div style="margin-top: 2rem;">
                <!-- English -->
                <input type="text" id="player-name-input" class="name-input lang-content active" data-lang="en" placeholder="Enter your name">
                <!-- Hindi -->
                <input type="text" id="player-name-input-hi" class="name-input lang-content hindi-text" data-lang="hi" placeholder="‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•á‡§Ç">
            </div>
            
            <div class="cert-buttons">
                <!-- English -->
                <div class="lang-content active" data-lang="en">
                    <button onclick="generateCertificate()" class="cert-btn generate">Generate Certificate</button>
                    <button onclick="downloadCertificate()" class="cert-btn download">Download PNG</button>
                    <button onclick="closeCertificateModal()" class="cert-btn close">Close</button>
                </div>
                <!-- Hindi -->
                <div class="lang-content hindi-text" data-lang="hi">
                    <button onclick="generateCertificate()" class="cert-btn generate">‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞ ‡§¨‡§®‡§æ‡§è‡§Ç</button>
                    <button onclick="downloadCertificate()" class="cert-btn download">PNG ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</button>
                    <button onclick="closeCertificateModal()" class="cert-btn close">‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game State
        let gameState = {
            currentLanguage: 'en',
            livesProtected: 0,
            knowledgePoints: 0,
            missionsCompleted: 0,
            currentMission: 'clinic',
            completedMissions: []
        };

        // Mission tracking
        let selectedSymptoms = [];
        let protectedStudents = [];
        let selectedEducationMethods = [];
        let foundBreedingSites = [];
        let breedingHelpShown = false;

        // Language switching
        function switchLanguage(lang) {
            gameState.currentLanguage = lang;
            
            // Update active language button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.lang === lang) {
                    btn.classList.add('active');
                }
            });
            
            // Show/hide language content
            document.querySelectorAll('.lang-content').forEach(content => {
                content.classList.remove('active');
                if (content.dataset.lang === lang) {
                    content.classList.add('active');
                }
            });
        }

        // Update stats display
        function updateStats() {
            document.getElementById('livesProtected').textContent = gameState.livesProtected;
            document.getElementById('knowledgePoints').textContent = gameState.knowledgePoints;
            document.getElementById('missionsCompleted').textContent = gameState.missionsCompleted;
        }

        // Open mission modal
        function openMission(missionId) {
            const location = document.getElementById(missionId + '-location') || document.querySelector('.' + missionId);
            
            if (location && location.classList.contains('disabled')) {
                const messages = {
                    en: 'Complete previous missions first!',
                    hi: '‡§™‡§π‡§≤‡•á ‡§™‡§ø‡§õ‡§≤‡•á ‡§Æ‡§ø‡§∂‡§® ‡§™‡•Ç‡§∞‡•á ‡§ï‡§∞‡•á‡§Ç!'
                };
                alert(messages[gameState.currentLanguage]);
                return;
            }
            
            if (gameState.completedMissions.includes(missionId)) {
                const messages = {
                    en: 'Mission already completed!',
                    hi: '‡§Æ‡§ø‡§∂‡§® ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§™‡•Ç‡§∞‡§æ ‡§π‡•à!'
                };
                alert(messages[gameState.currentLanguage]);
                return;
            }

            document.getElementById('mission-modal').classList.add('active');
            loadMissionContent(missionId);
        }

        // Close mission modal
        function closeMissionModal() {
            document.getElementById('mission-modal').classList.remove('active');
        }

        // Load mission content
        function loadMissionContent(missionId) {
            const titles = {
                en: {
                    clinic: 'üè• Emergency Clinic - Patient Diagnosis',
                    school: 'üè´ Village School - Student Protection',
                    market: 'üè™ Community Market - Health Education',
                    homes: 'üè† Family Compounds - Vector Control'
                },
                hi: {
                    clinic: 'üè• ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï - ‡§∞‡•ã‡§ó‡•Ä ‡§®‡§ø‡§¶‡§æ‡§®',
                    school: 'üè´ ‡§ó‡§æ‡§Ç‡§µ ‡§ï‡§æ ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§≤‡§Ø - ‡§õ‡§æ‡§§‡•ç‡§∞ ‡§∏‡§Ç‡§∞‡§ï‡•ç‡§∑‡§£',
                    market: 'üè™ ‡§∏‡§æ‡§Æ‡•Å‡§¶‡§æ‡§Ø‡§ø‡§ï ‡§¨‡§æ‡§ú‡§æ‡§∞ - ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ',
                    homes: 'üè† ‡§™‡§æ‡§∞‡§ø‡§µ‡§æ‡§∞‡§ø‡§ï ‡§™‡§∞‡§ø‡§∏‡§∞ - ‡§µ‡•á‡§ï‡•ç‡§ü‡§∞ ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£'
                }
            };

            document.getElementById('modal-title').textContent = titles[gameState.currentLanguage][missionId];

            if (missionId === 'clinic') {
                loadClinicMission();
            } else if (missionId === 'school') {
                loadSchoolMission();
            } else if (missionId === 'market') {
                loadMarketMission();
            } else if (missionId === 'homes') {
                loadHomesMission();
            }
        }

        // CLINIC MISSION
        function loadClinicMission() {
            selectedSymptoms = [];
            const content = {
                en: `
                    <div class="mission-intro">
                        <div class="npc-dialogue">
                            <div class="npc-avatar">üë®‚Äç‚öïÔ∏è</div>
                            <div class="dialogue-bubble">
                                <div class="npc-name">Dr. Kwame Asante - Head of Emergency Medicine</div>
                                <p>"We have a critically ill 8-year-old child with high fever. The symptoms started 3 days ago and are worsening rapidly. I need your expertise to identify which symptoms are consistent with malaria based on WHO clinical guidelines. Every second counts!"</p>
                            </div>
                        </div>
                    </div>

                    <div class="challenge-section">
                        <h3 class="challenge-title">ü©∫ Clinical Symptom Assessment</h3>
                        <p class="challenge-description">Select ALL symptoms that are consistent with malaria diagnosis according to WHO 2024 guidelines. Accurate identification is crucial for immediate treatment.</p>
                        
                        <div class="options-grid">
                            <div class="option-card" data-symptom="fever" onclick="toggleSymptom('fever')">
                                <div class="option-icon">üå°Ô∏è</div>
                                <div class="option-name">High fever (39.5¬∞C)</div>
                            </div>
                            <div class="option-card" data-symptom="headache" onclick="toggleSymptom('headache')">
                                <div class="option-icon">ü§ï</div>
                                <div class="option-name">Severe headache</div>
                            </div>
                            <div class="option-card" data-symptom="chills" onclick="toggleSymptom('chills')">
                                <div class="option-icon">ü•∂</div>
                                <div class="option-name">Chills and sweats</div>
                            </div>
                            <div class="option-card" data-symptom="nausea" onclick="toggleSymptom('nausea')">
                                <div class="option-icon">ü§¢</div>
                                <div class="option-name">Nausea and vomiting</div>
                            </div>
                            <div class="option-card" data-symptom="fatigue" onclick="toggleSymptom('fatigue')">
                                <div class="option-icon">üò¥</div>
                                <div class="option-name">Extreme fatigue</div>
                            </div>
                            <div class="option-card" data-symptom="rash" onclick="toggleSymptom('rash')">
                                <div class="option-icon">üî¥</div>
                                <div class="option-name">Skin rash</div>
                            </div>
                            <div class="option-card" data-symptom="cough" onclick="toggleSymptom('cough')">
                                <div class="option-icon">üò∑</div>
                                <div class="option-name">Persistent cough</div>
                            </div>
                            <div class="option-card" data-symptom="throat" onclick="toggleSymptom('throat')">
                                <div class="option-icon">üò£</div>
                                <div class="option-name">Sore throat</div>
                            </div>
                        </div>
                        
                        <div class="feedback-panel" id="clinic-feedback"></div>
                        <button class="action-btn" id="clinic-submit" onclick="evaluateClinicDiagnosis()" disabled>ü©∫ Submit Diagnosis</button>
                    </div>
                `,
                hi: `
                    <div class="mission-intro">
                        <div class="npc-dialogue">
                            <div class="npc-avatar">üë®‚Äç‚öïÔ∏è</div>
                            <div class="dialogue-bubble">
                                <div class="npc-name">‡§°‡•â. ‡§ï‡•ç‡§µ‡§æ‡§Æ‡•á ‡§Ö‡§∏‡§æ‡§Ç‡§§‡•á - ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§™‡•ç‡§∞‡§Æ‡•Å‡§ñ</div>
                                <p>"‡§π‡§Æ‡§æ‡§∞‡•á ‡§™‡§æ‡§∏ ‡§§‡•á‡§ú ‡§¨‡•Å‡§ñ‡§æ‡§∞ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ó‡§Ç‡§≠‡•Ä‡§∞ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§¨‡•Ä‡§Æ‡§æ‡§∞ 8 ‡§∏‡§æ‡§≤ ‡§ï‡§æ ‡§¨‡§ö‡•ç‡§ö‡§æ ‡§π‡•à‡•§ ‡§≤‡§ï‡•ç‡§∑‡§£ 3 ‡§¶‡§ø‡§® ‡§™‡§π‡§≤‡•á ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•Å‡§è ‡§î‡§∞ ‡§§‡•á‡§ú‡•Ä ‡§∏‡•á ‡§¨‡§ø‡§ó‡§°‡§º ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§ ‡§Æ‡•Å‡§ù‡•á ‡§Ü‡§™‡§ï‡•Ä ‡§µ‡§ø‡§∂‡•á‡§∑‡§ú‡•ç‡§û‡§§‡§æ ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à ‡§ï‡§ø WHO ‡§®‡•à‡§¶‡§æ‡§®‡§ø‡§ï ‡§¶‡§ø‡§∂‡§æ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂‡•ã‡§Ç ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ ‡§ï‡•å‡§® ‡§∏‡•á ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§ï‡•á ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤ ‡§π‡•à‡§Ç‡•§ ‡§π‡§∞ ‡§∏‡•á‡§ï‡§Ç‡§° ‡§Æ‡§æ‡§Ø‡§®‡•á ‡§∞‡§ñ‡§§‡§æ ‡§π‡•à!"</p>
                            </div>
                        </div>
                    </div>

                    <div class="challenge-section">
                        <h3 class="challenge-title">ü©∫ ‡§®‡•à‡§¶‡§æ‡§®‡§ø‡§ï ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§®</h3>
                        <p class="challenge-description">WHO 2024 ‡§¶‡§ø‡§∂‡§æ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂‡•ã‡§Ç ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§®‡§ø‡§¶‡§æ‡§® ‡§ï‡•á ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤ ‡§∏‡§≠‡•Ä ‡§≤‡§ï‡•ç‡§∑‡§£‡•ã‡§Ç ‡§ï‡§æ ‡§ö‡§Ø‡§® ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§§‡§§‡•ç‡§ï‡§æ‡§≤ ‡§â‡§™‡§ö‡§æ‡§∞ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§ü‡•Ä‡§ï ‡§™‡§π‡§ö‡§æ‡§® ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§π‡•à‡•§</p>
                        
                        <div class="options-grid">
                            <div class="option-card" data-symptom="fever" onclick="toggleSymptom('fever')">
                                <div class="option-icon">üå°Ô∏è</div>
                                <div class="option-name">‡§§‡•á‡§ú ‡§¨‡•Å‡§ñ‡§æ‡§∞ (39.5¬∞C)</div>
                            </div>
                            <div class="option-card" data-symptom="headache" onclick="toggleSymptom('headache')">
                                <div class="option-icon">ü§ï</div>
                                <div class="option-name">‡§§‡•Ä‡§µ‡•ç‡§∞ ‡§∏‡§ø‡§∞‡§¶‡§∞‡•ç‡§¶</div>
                            </div>
                            <div class="option-card" data-symptom="chills" onclick="toggleSymptom('chills')">
                                <div class="option-icon">ü•∂</div>
                                <div class="option-name">‡§ï‡§Ç‡§™‡§ï‡§Ç‡§™‡•Ä ‡§î‡§∞ ‡§™‡§∏‡•Ä‡§®‡§æ</div>
                            </div>
                            <div class="option-card" data-symptom="nausea" onclick="toggleSymptom('nausea')">
                                <div class="option-icon">ü§¢</div>
                                <div class="option-name">‡§Æ‡§§‡§≤‡•Ä ‡§î‡§∞ ‡§â‡§≤‡•ç‡§ü‡•Ä</div>
                            </div>
                            <div class="option-card" data-symptom="fatigue" onclick="toggleSymptom('fatigue')">
                                <div class="option-icon">üò¥</div>
                                <div class="option-name">‡§Ö‡§§‡•ç‡§Ø‡§ß‡§ø‡§ï ‡§•‡§ï‡§æ‡§®</div>
                            </div>
                            <div class="option-card" data-symptom="rash" onclick="toggleSymptom('rash')">
                                <div class="option-icon">üî¥</div>
                                <div class="option-name">‡§§‡•ç‡§µ‡§ö‡§æ ‡§™‡§∞ ‡§¶‡§æ‡§®‡•á</div>
                            </div>
                            <div class="option-card" data-symptom="cough" onclick="toggleSymptom('cough')">
                                <div class="option-icon">üò∑</div>
                                <div class="option-name">‡§≤‡§ó‡§æ‡§§‡§æ‡§∞ ‡§ñ‡§æ‡§Ç‡§∏‡•Ä</div>
                            </div>
                            <div class="option-card" data-symptom="throat" onclick="toggleSymptom('throat')">
                                <div class="option-icon">üò£</div>
                                <div class="option-name">‡§ó‡§≤‡•á ‡§Æ‡•á‡§Ç ‡§ñ‡§∞‡§æ‡§∂</div>
                            </div>
                        </div>
                        
                        <div class="feedback-panel" id="clinic-feedback"></div>
                        <button class="action-btn" id="clinic-submit" onclick="evaluateClinicDiagnosis()" disabled>ü©∫ ‡§®‡§ø‡§¶‡§æ‡§® ‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡•Å‡§§ ‡§ï‡§∞‡•á‡§Ç</button>
                    </div>
                `
            };
            
            document.getElementById('modal-content').innerHTML = content[gameState.currentLanguage];
        }

        // Toggle symptom selection
        function toggleSymptom(symptomId) {
            const symptomCard = document.querySelector(`[data-symptom="${symptomId}"]`);
            
            if (selectedSymptoms.includes(symptomId)) {
                selectedSymptoms = selectedSymptoms.filter(s => s !== symptomId);
                symptomCard.classList.remove('selected');
            } else {
                selectedSymptoms.push(symptomId);
                symptomCard.classList.add('selected');
            }
            
            document.getElementById('clinic-submit').disabled = selectedSymptoms.length === 0;
        }

        // Evaluate clinic diagnosis
        function evaluateClinicDiagnosis() {
            const correctSymptoms = ['fever', 'headache', 'chills', 'nausea', 'fatigue'];
            const incorrectSymptoms = ['rash', 'cough', 'throat'];
            
            let correctCount = 0;
            let incorrectCount = 0;
            
            // Evaluate each selected symptom
            selectedSymptoms.forEach(symptomId => {
                const symptomCard = document.querySelector(`[data-symptom="${symptomId}"]`);
                if (correctSymptoms.includes(symptomId)) {
                    symptomCard.classList.add('correct');
                    correctCount++;
                } else {
                    symptomCard.classList.add('incorrect');
                    incorrectCount++;
                }
            });
            
            // Add detailed explanation for each symptom with WHO information
            const feedbackPanel = document.getElementById('clinic-feedback');
            feedbackPanel.innerHTML = ''; // Clear any existing content first
            
            const lang = gameState.currentLanguage;
            let explanationHTML = '<div style="margin-top: 1rem;"><h4>' + 
                (lang === 'en' ? 'WHO Clinical Guidelines Analysis:' : 'WHO ‡§®‡•à‡§¶‡§æ‡§®‡§ø‡§ï ‡§¶‡§ø‡§∂‡§æ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£:') + '</h4><ul>';
            
            // Define detailed explanations for each symptom
            const symptomExplanations = {
                en: {
                    fever: '‚úÖ <strong>High Fever (39.5¬∞C)</strong> - WHO lists fever as the primary symptom of malaria. Temperature above 38¬∞C with no other obvious cause is considered malaria until proven otherwise in endemic areas.',
                    headache: '‚úÖ <strong>Severe Headache</strong> - WHO identifies headache as one of the classic triad of malaria symptoms (fever, headache, chills). Present in 80-90% of malaria cases.',
                    chills: '‚úÖ <strong>Chills and Sweats</strong> - WHO recognizes chills and sweating as hallmark symptoms of malaria, especially during the febrile paroxysms that occur every 48-72 hours.',
                    nausea: '‚úÖ <strong>Nausea and Vomiting</strong> - WHO guidelines include gastrointestinal symptoms like nausea and vomiting as common in malaria, especially in children.',
                    fatigue: '‚úÖ <strong>Extreme Fatigue</strong> - WHO identifies fatigue and malaise as typical symptoms of malaria due to the body\'s inflammatory response to the parasite.',
                    rash: '‚ùå <strong>Skin Rash</strong> - WHO guidelines state that rash is NOT a typical malaria symptom. This suggests other conditions like viral infections or allergic reactions.',
                    cough: '‚ùå <strong>Persistent Cough</strong> - WHO notes that respiratory symptoms like cough are uncommon in uncomplicated malaria and may indicate other diseases or complications.',
                    throat: '‚ùå <strong>Sore Throat</strong> - WHO guidelines indicate that sore throat is NOT associated with malaria and suggests upper respiratory infections instead.'
                },
                hi: {
                    fever: '‚úÖ <strong>‡§§‡•á‡§ú ‡§¨‡•Å‡§ñ‡§æ‡§∞ (39.5¬∞C)</strong> - WHO ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§ï‡•á ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§¨‡•Å‡§ñ‡§æ‡§∞ ‡§ï‡•ã ‡§∏‡•Ç‡§ö‡•Ä‡§¨‡§¶‡•ç‡§ß ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§ ‡§∏‡•ç‡§•‡§æ‡§®‡§ø‡§ï ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç 38¬∞C ‡§∏‡•á ‡§Ö‡§ß‡§ø‡§ï ‡§§‡§æ‡§™‡§Æ‡§æ‡§® ‡§ï‡•ã ‡§Ö‡§®‡•ç‡§Ø ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü ‡§ï‡§æ‡§∞‡§£ ‡§ï‡•á ‡§¨‡§ø‡§®‡§æ ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§Æ‡§æ‡§®‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à‡•§',
                    headache: '‚úÖ <strong>‡§§‡•Ä‡§µ‡•ç‡§∞ ‡§∏‡§ø‡§∞‡§¶‡§∞‡•ç‡§¶</strong> - WHO ‡§∏‡§ø‡§∞‡§¶‡§∞‡•ç‡§¶ ‡§ï‡•ã ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§ï‡•á ‡§ï‡•ç‡§≤‡§æ‡§∏‡§ø‡§ï ‡§§‡•ç‡§∞‡§Ø (‡§¨‡•Å‡§ñ‡§æ‡§∞, ‡§∏‡§ø‡§∞‡§¶‡§∞‡•ç‡§¶, ‡§ï‡§Ç‡§™‡§ï‡§Ç‡§™‡•Ä) ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§è‡§ï ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§™‡§π‡§ö‡§æ‡§®‡§§‡§æ ‡§π‡•à‡•§ 80-90% ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§Æ‡§æ‡§Æ‡§≤‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§Æ‡•å‡§ú‡•Ç‡§¶‡•§',
                    chills: '‚úÖ <strong>‡§ï‡§Ç‡§™‡§ï‡§Ç‡§™‡•Ä ‡§î‡§∞ ‡§™‡§∏‡•Ä‡§®‡§æ</strong> - WHO ‡§ï‡§Ç‡§™‡§ï‡§Ç‡§™‡•Ä ‡§î‡§∞ ‡§™‡§∏‡•Ä‡§®‡•á ‡§ï‡•ã ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§ï‡•á ‡§™‡•ç‡§∞‡§Æ‡•Å‡§ñ ‡§≤‡§ï‡•ç‡§∑‡§£‡•ã‡§Ç ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§™‡§π‡§ö‡§æ‡§®‡§§‡§æ ‡§π‡•à, ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§π‡§∞ 48-72 ‡§ò‡§Ç‡§ü‡•á ‡§Æ‡•á‡§Ç ‡§π‡•ã‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§ú‡•ç‡§µ‡§∞ ‡§ï‡•á ‡§¶‡•å‡§∞‡§æ‡§®‡•§',
                    nausea: '‚úÖ <strong>‡§Æ‡§§‡§≤‡•Ä ‡§î‡§∞ ‡§â‡§≤‡•ç‡§ü‡•Ä</strong> - WHO ‡§¶‡§ø‡§∂‡§æ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂ ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§Æ‡•á‡§Ç ‡§Æ‡§§‡§≤‡•Ä ‡§î‡§∞ ‡§â‡§≤‡•ç‡§ü‡•Ä ‡§ú‡•à‡§∏‡•á ‡§ó‡•à‡§∏‡•ç‡§ü‡•ç‡§∞‡•ã‡§á‡§Ç‡§ü‡•á‡§∏‡•ç‡§ü‡§æ‡§á‡§®‡§≤ ‡§≤‡§ï‡•ç‡§∑‡§£‡•ã‡§Ç ‡§ï‡•ã ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç, ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§¨‡§ö‡•ç‡§ö‡•ã‡§Ç ‡§Æ‡•á‡§Ç‡•§',
                    fatigue: '‚úÖ <strong>‡§Ö‡§§‡•ç‡§Ø‡§ß‡§ø‡§ï ‡§•‡§ï‡§æ‡§®</strong> - WHO ‡§™‡§∞‡§ú‡•Ä‡§µ‡•Ä ‡§ï‡•á ‡§™‡•ç‡§∞‡§§‡§ø ‡§∂‡§∞‡•Ä‡§∞ ‡§ï‡•Ä ‡§∏‡•Ç‡§ú‡§® ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§ï‡•á ‡§ï‡§æ‡§∞‡§£ ‡§•‡§ï‡§æ‡§® ‡§î‡§∞ ‡§¨‡•á‡§ö‡•à‡§®‡•Ä ‡§ï‡•ã ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§ï‡•á ‡§µ‡§ø‡§∂‡§ø‡§∑‡•ç‡§ü ‡§≤‡§ï‡•ç‡§∑‡§£‡•ã‡§Ç ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§™‡§π‡§ö‡§æ‡§®‡§§‡§æ ‡§π‡•à‡•§',
                    rash: '‚ùå <strong>‡§§‡•ç‡§µ‡§ö‡§æ ‡§™‡§∞ ‡§¶‡§æ‡§®‡•á</strong> - WHO ‡§¶‡§ø‡§∂‡§æ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂ ‡§¨‡§§‡§æ‡§§‡•á ‡§π‡•à‡§Ç ‡§ï‡§ø ‡§¶‡§æ‡§®‡•á ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§ï‡§æ ‡§µ‡§ø‡§∂‡§ø‡§∑‡•ç‡§ü ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ ‡§Ø‡§π ‡§µ‡§æ‡§Ø‡§∞‡§≤ ‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§£ ‡§Ø‡§æ ‡§è‡§≤‡§∞‡•ç‡§ú‡•Ä ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡§ì‡§Ç ‡§ú‡•à‡§∏‡•Ä ‡§Ö‡§®‡•ç‡§Ø ‡§∏‡•ç‡§•‡§ø‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§',
                    cough: '‚ùå <strong>‡§≤‡§ó‡§æ‡§§‡§æ‡§∞ ‡§ñ‡§æ‡§Ç‡§∏‡•Ä</strong> - WHO ‡§®‡•ã‡§ü ‡§ï‡§∞‡§§‡§æ ‡§π‡•à ‡§ï‡§ø ‡§ñ‡§æ‡§Ç‡§∏‡•Ä ‡§ú‡•à‡§∏‡•á ‡§∂‡•ç‡§µ‡§∏‡§® ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§Ö‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§Æ‡•á‡§Ç ‡§Ö‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§¨‡•Ä‡§Æ‡§æ‡§∞‡§ø‡§Ø‡•ã‡§Ç ‡§Ø‡§æ ‡§ú‡§ü‡§ø‡§≤‡§§‡§æ‡§ì‡§Ç ‡§ï‡§æ ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§¶‡•á ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§',
                    throat: '‚ùå <strong>‡§ó‡§≤‡•á ‡§Æ‡•á‡§Ç ‡§ñ‡§∞‡§æ‡§∂</strong> - WHO ‡§¶‡§ø‡§∂‡§æ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂ ‡§¨‡§§‡§æ‡§§‡•á ‡§π‡•à‡§Ç ‡§ï‡§ø ‡§ó‡§≤‡•á ‡§Æ‡•á‡§Ç ‡§ñ‡§∞‡§æ‡§∂ ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§∏‡•á ‡§ú‡•Å‡§°‡§º‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à ‡§î‡§∞ ‡§á‡§∏‡§ï‡•á ‡§¨‡§ú‡§æ‡§Ø ‡§ä‡§™‡§∞‡•Ä ‡§∂‡•ç‡§µ‡§∏‡§® ‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§£ ‡§ï‡§æ ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§¶‡•á‡§§‡•Ä ‡§π‡•à‡•§'
                }
            };
            
            selectedSymptoms.forEach(symptom => {
                const isCorrect = correctSymptoms.includes(symptom);
                const color = isCorrect ? 'green' : 'red';
                explanationHTML += `<li style="color: ${color}; margin-bottom: 0.5rem;">${symptomExplanations[lang][symptom]}</li>`;
            });
            
            // Add summary of what should have been selected
            explanationHTML += '</ul><div style="margin-top: 1rem; padding: 1rem; background: #f0f9ff; border-radius: 8px; border-left: 4px solid var(--hero-blue);">';
            explanationHTML += '<h5>' + (lang === 'en' ? 'WHO Recommended Malaria Symptoms:' : 'WHO ‡§Ö‡§®‡•Å‡§∂‡§Ç‡§∏‡§ø‡§§ ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§≤‡§ï‡•ç‡§∑‡§£:') + '</h5>';
            explanationHTML += '<p>' + (lang === 'en' ? 
                'According to WHO 2024 guidelines, the classic malaria symptoms are: High fever (‚â•38¬∞C), severe headache, chills and sweats, nausea/vomiting, and extreme fatigue. These symptoms typically appear 10-15 days after infection and occur in cyclical patterns.' :
                'WHO 2024 ‡§¶‡§ø‡§∂‡§æ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂‡•ã‡§Ç ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞, ‡§ï‡•ç‡§≤‡§æ‡§∏‡§ø‡§ï ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§π‡•à‡§Ç: ‡§§‡•á‡§ú ‡§¨‡•Å‡§ñ‡§æ‡§∞ (‚â•38¬∞C), ‡§§‡•Ä‡§µ‡•ç‡§∞ ‡§∏‡§ø‡§∞‡§¶‡§∞‡•ç‡§¶, ‡§ï‡§Ç‡§™‡§ï‡§Ç‡§™‡•Ä ‡§î‡§∞ ‡§™‡§∏‡•Ä‡§®‡§æ, ‡§Æ‡§§‡§≤‡•Ä/‡§â‡§≤‡•ç‡§ü‡•Ä, ‡§î‡§∞ ‡§Ö‡§§‡•ç‡§Ø‡§ß‡§ø‡§ï ‡§•‡§ï‡§æ‡§®‡•§ ‡§Ø‡•á ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§Ü‡§Æ‡§§‡•å‡§∞ ‡§™‡§∞ ‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§£ ‡§ï‡•á 10-15 ‡§¶‡§ø‡§® ‡§¨‡§æ‡§¶ ‡§¶‡§ø‡§ñ‡§æ‡§à ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§ö‡§ï‡•ç‡§∞‡•Ä‡§Ø ‡§™‡•à‡§ü‡§∞‡•ç‡§® ‡§Æ‡•á‡§Ç ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç‡•§') + '</p>';
            explanationHTML += '</div></div>';
            
            feedbackPanel.innerHTML = explanationHTML;
            feedbackPanel.classList.add('show');
            
            // Calculate performance
            const accuracy = correctCount / correctSymptoms.length;
            let performance, points, lives;
            
            if (accuracy >= 0.8 && incorrectCount === 0) {
                performance = 'excellent';
                points = 150;
                lives = 12;
            } else if (accuracy >= 0.6) {
                performance = 'good';
                points = 100;
                lives = 8;
            } else if (accuracy >= 0.4) {
                performance = 'satisfactory';
                points = 75;
                lives = 5;
            } else {
                performance = 'needs-improvement';
                points = 50;
                lives = 3;
            }
            
            gameState.knowledgePoints += points;
            gameState.livesProtected += lives;
            updateStats();
            
            // Update submit button
            const continueText = gameState.currentLanguage === 'en' ? 'üöÄ Continue to Next Mission' : 'üöÄ ‡§Ö‡§ó‡§≤‡•á ‡§Æ‡§ø‡§∂‡§® ‡§™‡§∞ ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡•á‡§Ç';
            document.getElementById('clinic-submit').textContent = continueText;
            document.getElementById('clinic-submit').onclick = () => completeMission('clinic');
        }

        // SCHOOL MISSION
        function loadSchoolMission() {
            protectedStudents = [];
            const content = {
                en: `
                    <div class="mission-intro">
                        <div class="npc-dialogue">
                            <div class="npc-avatar">üë®‚Äçüè´</div>
                            <div class="dialogue-bubble">
                                <div class="npc-name">Mr. Joseph Kwame - School Principal</div>
                                <p>"We have 12 students who need protection, but only 7 bed nets available! WHO data shows children under 10 have much higher malaria mortality rates. Please help us prioritize which students to protect based on their age and vulnerability."</p>
                            </div>
                        </div>
                    </div>

                    <div class="challenge-section">
                        <h3 class="challenge-title">üõ°Ô∏è Evidence-Based Student Protection</h3>
                        <p class="challenge-description">Select 7 students to receive bed net protection. Prioritize based on WHO vulnerability data: younger children (under 10) are at highest risk.</p>
                        
                        <div class="student-grid">
                            <div class="student-card high-risk" data-student="0" onclick="toggleStudentProtection(0)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">Ama</div>
                                <div class="student-age">Age 8</div>
                            </div>
                            <div class="student-card high-risk" data-student="1" onclick="toggleStudentProtection(1)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">Kofi</div>
                                <div class="student-age">Age 9</div>
                            </div>
                            <div class="student-card medium-risk" data-student="2" onclick="toggleStudentProtection(2)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">Esi</div>
                                <div class="student-age">Age 10</div>
                            </div>
                            <div class="student-card medium-risk" data-student="3" onclick="toggleStudentProtection(3)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">Yaw</div>
                                <div class="student-age">Age 11</div>
                            </div>
                            <div class="student-card low-risk" data-student="4" onclick="toggleStudentProtection(4)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">Akua</div>
                                <div class="student-age">Age 12</div>
                            </div>
                            <div class="student-card low-risk" data-student="5" onclick="toggleStudentProtection(5)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">Kwame</div>
                                <div class="student-age">Age 13</div>
                            </div>
                            <div class="student-card low-risk" data-student="6" onclick="toggleStudentProtection(6)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">Afia</div>
                                <div class="student-age">Age 14</div>
                            </div>
                            <div class="student-card high-risk" data-student="7" onclick="toggleStudentProtection(7)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">Kojo</div>
                                <div class="student-age">Age 8</div>
                            </div>
                            <div class="student-card medium-risk" data-student="8" onclick="toggleStudentProtection(8)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">Adwoa</div>
                                <div class="student-age">Age 10</div>
                            </div>
                            <div class="student-card high-risk" data-student="9" onclick="toggleStudentProtection(9)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">Yaa</div>
                                <div class="student-age">Age 9</div>
                            </div>
                            <div class="student-card low-risk" data-student="10" onclick="toggleStudentProtection(10)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">Kweku</div>
                                <div class="student-age">Age 13</div>
                            </div>
                            <div class="student-card low-risk" data-student="11" onclick="toggleStudentProtection(11)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">Akosua</div>
                                <div class="student-age">Age 12</div>
                            </div>
                        </div>
                        
                        <div class="feedback-panel" id="school-feedback"></div>
                        <button class="action-btn" id="school-submit" onclick="evaluateSchoolProtection()" disabled>üõ°Ô∏è Implement Protection Plan</button>
                    </div>
                `,
                hi: `
                    <div class="mission-intro">
                        <div class="npc-dialogue">
                            <div class="npc-avatar">üë®‚Äçüè´</div>
                            <div class="dialogue-bubble">
                                <div class="npc-name">‡§∂‡•ç‡§∞‡•Ä ‡§ú‡•ã‡§∏‡•á‡§´ ‡§ï‡•ç‡§µ‡§æ‡§Æ‡•á - ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§≤‡§Ø ‡§™‡•ç‡§∞‡§æ‡§ö‡§æ‡§∞‡•ç‡§Ø</div>
                                <p>"‡§π‡§Æ‡§æ‡§∞‡•á ‡§™‡§æ‡§∏ 12 ‡§õ‡§æ‡§§‡•ç‡§∞ ‡§π‡•à‡§Ç ‡§ú‡§ø‡§®‡•ç‡§π‡•á‡§Ç ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à, ‡§≤‡•á‡§ï‡§ø‡§® ‡§ï‡•á‡§µ‡§≤ 7 ‡§Æ‡§ö‡•ç‡§õ‡§∞‡§¶‡§æ‡§®‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§π‡•à‡§Ç! WHO ‡§°‡•á‡§ü‡§æ ‡§¶‡§∞‡•ç‡§∂‡§æ‡§§‡§æ ‡§π‡•à ‡§ï‡§ø 10 ‡§µ‡§∞‡•ç‡§∑ ‡§∏‡•á ‡§ï‡§Æ ‡§â‡§Æ‡•ç‡§∞ ‡§ï‡•á ‡§¨‡§ö‡•ç‡§ö‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§Æ‡•É‡§§‡•ç‡§Ø‡•Å ‡§¶‡§∞ ‡§¨‡§π‡•Å‡§§ ‡§Ö‡§ß‡§ø‡§ï ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ï‡§∞‡•á‡§Ç ‡§Ø‡§π ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ ‡§§‡§Ø ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§ï‡§ø ‡§â‡§®‡§ï‡•Ä ‡§â‡§Æ‡•ç‡§∞ ‡§î‡§∞ ‡§∏‡§Ç‡§µ‡•á‡§¶‡§®‡§∂‡•Ä‡§≤‡§§‡§æ ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ ‡§ï‡§ø‡§® ‡§õ‡§æ‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§¶‡•Ä ‡§ú‡§æ‡§è‡•§"</p>
                            </div>
                        </div>
                    </div>

                    <div class="challenge-section">
                        <h3 class="challenge-title">üõ°Ô∏è ‡§∏‡§æ‡§ï‡•ç‡§∑‡•ç‡§Ø-‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§õ‡§æ‡§§‡•ç‡§∞ ‡§∏‡§Ç‡§∞‡§ï‡•ç‡§∑‡§£</h3>
                        <p class="challenge-description">‡§Æ‡§ö‡•ç‡§õ‡§∞‡§¶‡§æ‡§®‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è 7 ‡§õ‡§æ‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡§æ ‡§ö‡§Ø‡§® ‡§ï‡§∞‡•á‡§Ç‡•§ WHO ‡§∏‡§Ç‡§µ‡•á‡§¶‡§®‡§∂‡•Ä‡§≤‡§§‡§æ ‡§°‡•á‡§ü‡§æ ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ ‡§¶‡•á‡§Ç: ‡§õ‡•ã‡§ü‡•á ‡§¨‡§ö‡•ç‡§ö‡•á (10 ‡§µ‡§∞‡•ç‡§∑ ‡§∏‡•á ‡§ï‡§Æ) ‡§â‡§ö‡•ç‡§ö‡§§‡§Æ ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§Æ‡•á‡§Ç ‡§π‡•à‡§Ç‡•§</p>
                        
                        <div class="student-grid">
                            <div class="student-card high-risk" data-student="0" onclick="toggleStudentProtection(0)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">‡§Ö‡§Æ‡§æ</div>
                                <div class="student-age">‡§Ü‡§Ø‡•Å 8</div>
                            </div>
                            <div class="student-card high-risk" data-student="1" onclick="toggleStudentProtection(1)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">‡§ï‡•ã‡§´‡•Ä</div>
                                <div class="student-age">‡§Ü‡§Ø‡•Å 9</div>
                            </div>
                            <div class="student-card medium-risk" data-student="2" onclick="toggleStudentProtection(2)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">‡§è‡§∏‡•Ä</div>
                                <div class="student-age">‡§Ü‡§Ø‡•Å 10</div>
                            </div>
                            <div class="student-card medium-risk" data-student="3" onclick="toggleStudentProtection(3)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">‡§Ø‡§æ‡§µ</div>
                                <div class="student-age">‡§Ü‡§Ø‡•Å 11</div>
                            </div>
                            <div class="student-card low-risk" data-student="4" onclick="toggleStudentProtection(4)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">‡§Ö‡§ï‡•Å‡§Ü</div>
                                <div class="student-age">‡§Ü‡§Ø‡•Å 12</div>
                            </div>
                            <div class="student-card low-risk" data-student="5" onclick="toggleStudentProtection(5)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">‡§ï‡•ç‡§µ‡§æ‡§Æ‡•á</div>
                                <div class="student-age">‡§Ü‡§Ø‡•Å 13</div>
                            </div>
                            <div class="student-card low-risk" data-student="6" onclick="toggleStudentProtection(6)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">‡§Ö‡§´‡§ø‡§Ø‡§æ</div>
                                <div class="student-age">‡§Ü‡§Ø‡•Å 14</div>
                            </div>
                            <div class="student-card high-risk" data-student="7" onclick="toggleStudentProtection(7)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">‡§ï‡•ã‡§ú‡•ã</div>
                                <div class="student-age">‡§Ü‡§Ø‡•Å 8</div>
                            </div>
                            <div class="student-card medium-risk" data-student="8" onclick="toggleStudentProtection(8)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">‡§Ö‡§¶‡§µ‡•ã‡§Ü</div>
                                <div class="student-age">‡§Ü‡§Ø‡•Å 10</div>
                            </div>
                            <div class="student-card high-risk" data-student="9" onclick="toggleStudentProtection(9)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">‡§Ø‡§æ‡§Ü</div>
                                <div class="student-age">‡§Ü‡§Ø‡•Å 9</div>
                            </div>
                            <div class="student-card low-risk" data-student="10" onclick="toggleStudentProtection(10)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">‡§ï‡•ç‡§µ‡•á‡§ï‡•Ç</div>
                                <div class="student-age">‡§Ü‡§Ø‡•Å 13</div>
                            </div>
                            <div class="student-card low-risk" data-student="11" onclick="toggleStudentProtection(11)">
                                <div class="bed-icon">üõèÔ∏è</div>
                                <div class="student-name">‡§Ö‡§ï‡•ã‡§∏‡•Å‡§Ü</div>
                                <div class="student-age">‡§Ü‡§Ø‡•Å 12</div>
                            </div>
                        </div>
                        
                        <div class="feedback-panel" id="school-feedback"></div>
                        <button class="action-btn" id="school-submit" onclick="evaluateSchoolProtection()" disabled>üõ°Ô∏è ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§∞‡•á‡§Ç</button>
                    </div>
                `
            };
            
            document.getElementById('modal-content').innerHTML = content[gameState.currentLanguage];
        }

        // Toggle student protection
        function toggleStudentProtection(studentIndex) {
            const studentCard = document.querySelector(`[data-student="${studentIndex}"]`);
            
            if (protectedStudents.includes(studentIndex)) {
                protectedStudents = protectedStudents.filter(s => s !== studentIndex);
                studentCard.classList.remove('protected');
            } else if (protectedStudents.length < 7) {
                protectedStudents.push(studentIndex);
                studentCard.classList.add('protected');
            } else {
                const messages = {
                    en: 'Only 7 bed nets available! Remove protection from another student first.',
                    hi: '‡§ï‡•á‡§µ‡§≤ 7 ‡§Æ‡§ö‡•ç‡§õ‡§∞‡§¶‡§æ‡§®‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§π‡•à‡§Ç! ‡§™‡§π‡§≤‡•á ‡§ï‡§ø‡§∏‡•Ä ‡§Ö‡§®‡•ç‡§Ø ‡§õ‡§æ‡§§‡•ç‡§∞ ‡§∏‡•á ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§π‡§ü‡§æ‡§è‡§Ç‡•§'
                };
                alert(messages[gameState.currentLanguage]);
                return;
            }
            
            document.getElementById('school-submit').disabled = protectedStudents.length !== 7;
        }

        // Evaluate school protection
        function evaluateSchoolProtection() {
            const students = [
                { name: 'Ama', age: 8, risk: 'HIGH' },
                { name: 'Kofi', age: 9, risk: 'HIGH' },
                { name: 'Esi', age: 10, risk: 'MEDIUM' },
                { name: 'Yaw', age: 11, risk: 'MEDIUM' },
                { name: 'Akua', age: 12, risk: 'LOW' },
                { name: 'Kwame', age: 13, risk: 'LOW' },
                { name: 'Afia', age: 14, risk: 'LOW' },
                { name: 'Kojo', age: 8, risk: 'HIGH' },
                { name: 'Adwoa', age: 10, risk: 'MEDIUM' },
                { name: 'Yaa', age: 9, risk: 'HIGH' },
                { name: 'Kweku', age: 13, risk: 'LOW' },
                { name: 'Akosua', age: 12, risk: 'LOW' }
            ];
            
            let highRiskProtected = 0;
            let mediumRiskProtected = 0;
            let lowRiskProtected = 0;
            
            protectedStudents.forEach(index => {
                const student = students[index];
                if (student.age <= 9) highRiskProtected++;
                else if (student.age <= 11) mediumRiskProtected++;
                else lowRiskProtected++;
            });
            
            // Add detailed explanation with WHO evidence
            const schoolFeedback = document.getElementById('school-feedback');
            schoolFeedback.innerHTML = ''; // Clear any existing content first
            
            const lang = gameState.currentLanguage;
            let schoolExplanationHTML = '<div style="margin-top: 1rem;"><h4>' + 
                (lang === 'en' ? 'WHO Evidence-Based Risk Assessment:' : 'WHO ‡§∏‡§æ‡§ï‡•ç‡§∑‡•ç‡§Ø-‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§®:') + '</h4>';
            
            schoolExplanationHTML += '<div style="margin: 1rem 0; padding: 1rem; background: #f0f9ff; border-radius: 8px; border-left: 4px solid var(--hero-blue);">';
            schoolExplanationHTML += '<h5>' + (lang === 'en' ? 'Protection Priority Analysis:' : '‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£:') + '</h5>';
            schoolExplanationHTML += '<p>‚úÖ <strong>' + (lang === 'en' ? 'High-risk students protected (age ‚â§9):' : '‡§â‡§ö‡•ç‡§ö ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§µ‡§æ‡§≤‡•á ‡§õ‡§æ‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ (‡§Ü‡§Ø‡•Å ‚â§9):') + '</strong> ' + highRiskProtected + '/4</p>';
            schoolExplanationHTML += '<p>üü° <strong>' + (lang === 'en' ? 'Medium-risk students protected (age 10-11):' : '‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§µ‡§æ‡§≤‡•á ‡§õ‡§æ‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ (‡§Ü‡§Ø‡•Å 10-11):') + '</strong> ' + mediumRiskProtected + '/2</p>';
            schoolExplanationHTML += '<p>üî¥ <strong>' + (lang === 'en' ? 'Low-risk students protected (age ‚â•12):' : '‡§ï‡§Æ ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§µ‡§æ‡§≤‡•á ‡§õ‡§æ‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ (‡§Ü‡§Ø‡•Å ‚â•12):') + '</strong> ' + lowRiskProtected + '/6</p>';
            schoolExplanationHTML += '</div>';
            
            // Add WHO evidence and recommendations
            schoolExplanationHTML += '<div style="margin: 1rem 0; padding: 1rem; background: #f0fdf4; border-radius: 8px; border-left: 4px solid var(--victory-green);">';
            schoolExplanationHTML += '<h5>' + (lang === 'en' ? 'WHO Malaria Risk Data:' : 'WHO ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§°‡•á‡§ü‡§æ:') + '</h5>';
            schoolExplanationHTML += '<ul>';
            schoolExplanationHTML += '<li>' + (lang === 'en' ? 
                'Children under 5 years: 75% higher mortality risk, 60% of all malaria deaths' :
                '5 ‡§µ‡§∞‡•ç‡§∑ ‡§∏‡•á ‡§ï‡§Æ ‡§â‡§Æ‡•ç‡§∞ ‡§ï‡•á ‡§¨‡§ö‡•ç‡§ö‡•á: 75% ‡§Ö‡§ß‡§ø‡§ï ‡§Æ‡•É‡§§‡•ç‡§Ø‡•Å ‡§ú‡•ã‡§ñ‡§ø‡§Æ, ‡§∏‡§≠‡•Ä ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§Æ‡•å‡§§‡•ã‡§Ç ‡§ï‡§æ 60%') + '</li>';
            schoolExplanationHTML += '<li>' + (lang === 'en' ? 
                'Children 5-9 years: 50% higher mortality risk, 25% of malaria deaths' :
                '5-9 ‡§µ‡§∞‡•ç‡§∑ ‡§ï‡•á ‡§¨‡§ö‡•ç‡§ö‡•á: 50% ‡§Ö‡§ß‡§ø‡§ï ‡§Æ‡•É‡§§‡•ç‡§Ø‡•Å ‡§ú‡•ã‡§ñ‡§ø‡§Æ, ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§Æ‡•å‡§§‡•ã‡§Ç ‡§ï‡§æ 25%') + '</li>';
            schoolExplanationHTML += '<li>' + (lang === 'en' ? 
                'Children 10+ years: Lower risk, better immune response, 15% of malaria deaths' :
                '10+ ‡§µ‡§∞‡•ç‡§∑ ‡§ï‡•á ‡§¨‡§ö‡•ç‡§ö‡•á: ‡§ï‡§Æ ‡§ú‡•ã‡§ñ‡§ø‡§Æ, ‡§¨‡•á‡§π‡§§‡§∞ ‡§™‡•ç‡§∞‡§§‡§ø‡§∞‡§ï‡•ç‡§∑‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ, ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§Æ‡•å‡§§‡•ã‡§Ç ‡§ï‡§æ 15%') + '</li>';
            schoolExplanationHTML += '</ul>';
            schoolExplanationHTML += '<p><strong>' + (lang === 'en' ? 
                'WHO Recommendation: Prioritize bed net distribution to children under 10 years, especially those under 5, as they have the highest malaria mortality risk.' :
                'WHO ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂: 10 ‡§µ‡§∞‡•ç‡§∑ ‡§∏‡•á ‡§ï‡§Æ ‡§â‡§Æ‡•ç‡§∞ ‡§ï‡•á ‡§¨‡§ö‡•ç‡§ö‡•ã‡§Ç, ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§∞‡•Ç‡§™ ‡§∏‡•á 5 ‡§µ‡§∞‡•ç‡§∑ ‡§∏‡•á ‡§ï‡§Æ ‡§â‡§Æ‡•ç‡§∞ ‡§ï‡•á ‡§¨‡§ö‡•ç‡§ö‡•ã‡§Ç ‡§ï‡•ã ‡§Æ‡§ö‡•ç‡§õ‡§∞‡§¶‡§æ‡§®‡•Ä ‡§µ‡§ø‡§§‡§∞‡§£ ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ ‡§¶‡•á‡§Ç, ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø ‡§â‡§®‡§Æ‡•á‡§Ç ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§Æ‡•É‡§§‡•ç‡§Ø‡•Å ‡§ï‡§æ ‡§∏‡§¨‡§∏‡•á ‡§Ö‡§ß‡§ø‡§ï ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§π‡•à‡•§') + '</strong></p>';
            schoolExplanationHTML += '</div></div>';
            
            schoolFeedback.innerHTML = schoolExplanationHTML;
            schoolFeedback.classList.add('show');
            
            let performance, points, lives;
            
            if (highRiskProtected >= 3) {
                performance = 'excellent';
                points = 130;
                lives = 12;
            } else if (highRiskProtected >= 2) {
                performance = 'good';  
                points = 100;
                lives = 9;
            } else if (highRiskProtected >= 1) {
                performance = 'satisfactory';
                points = 70;
                lives = 6;
            } else {
                performance = 'needs-improvement';
                points = 40;
                lives = 3;
            }
            
            gameState.knowledgePoints += points;
            gameState.livesProtected += lives;
            updateStats();
            
            // Update submit button
            const continueText = gameState.currentLanguage === 'en' ? 'üöÄ Continue to Next Mission' : 'üöÄ ‡§Ö‡§ó‡§≤‡•á ‡§Æ‡§ø‡§∂‡§® ‡§™‡§∞ ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡•á‡§Ç';
            document.getElementById('school-submit').textContent = continueText;
            document.getElementById('school-submit').onclick = () => completeMission('school');
        }

        // MARKET MISSION
        function loadMarketMission() {
            selectedEducationMethods = [];
            const content = {
                en: `
                    <div class="mission-intro">
                        <div class="npc-dialogue">
                            <div class="npc-avatar">üëµ</div>
                            <div class="dialogue-bubble">
                                <div class="npc-name">Elder Akosua - Community Leader</div>
                                <p>"Many vendors are falling ill with malaria, and people are scared. We need effective health education methods to teach prevention without causing panic or blame. What approaches actually change behavior and save lives?"</p>
                            </div>
                        </div>
                    </div>

                    <div class="challenge-section">
                        <h3 class="challenge-title">üì¢ Evidence-Based Health Communication</h3>
                        <p class="challenge-description">Select effective health education methods that build trust and change behavior. Avoid approaches that blame or frighten people.</p>
                        
                        <div class="options-grid">
                            <div class="option-card" data-method="demonstrations" onclick="toggleEducationMethod('demonstrations')">
                                <div class="option-name">üé≠ Live demonstrations of prevention methods</div>
                            </div>
                            <div class="option-card" data-method="visual-aids" onclick="toggleEducationMethod('visual-aids')">
                                <div class="option-name">üìã Clear visual aids and posters</div>
                            </div>
                            <div class="option-card" data-method="community-sessions" onclick="toggleEducationMethod('community-sessions')">
                                <div class="option-name">üë• Community health education sessions</div>
                            </div>
                            <div class="option-card" data-method="peer-education" onclick="toggleEducationMethod('peer-education')">
                                <div class="option-name">ü§ù Train community members as educators</div>
                            </div>
                            <div class="option-card" data-method="fear-tactics" onclick="toggleEducationMethod('fear-tactics')">
                                <div class="option-name">üò± Use scary statistics to motivate</div>
                            </div>
                            <div class="option-card" data-method="blame-approach" onclick="toggleEducationMethod('blame-approach')">
                                <div class="option-name">üò† Blame people for getting sick</div>
                            </div>
                            <div class="option-card" data-method="expensive-solutions" onclick="toggleEducationMethod('expensive-solutions')">
                                <div class="option-name">üí∞ Only promote costly prevention methods</div>
                            </div>
                            <div class="option-card" data-method="ignore-culture" onclick="toggleEducationMethod('ignore-culture')">
                                <div class="option-name">üö´ Ignore local beliefs and practices</div>
                            </div>
                        </div>
                        
                        <div class="feedback-panel" id="market-feedback"></div>
                        <button class="action-btn" id="market-submit" onclick="evaluateHealthEducation()" disabled>üì¢ Launch Education Campaign</button>
                    </div>
                `,
                hi: `
                    <div class="mission-intro">
                        <div class="npc-dialogue">
                            <div class="npc-avatar">üëµ</div>
                            <div class="dialogue-bubble">
                                <div class="npc-name">‡§¨‡•Å‡§ú‡•Å‡§∞‡•ç‡§ó ‡§Ö‡§ï‡•ã‡§∏‡•Å‡§Ü - ‡§∏‡§æ‡§Æ‡•Å‡§¶‡§æ‡§Ø‡§ø‡§ï ‡§®‡•á‡§§‡§æ</div>
                                <p>"‡§ï‡§à ‡§µ‡§ø‡§ï‡•ç‡§∞‡•á‡§§‡§æ ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§∏‡•á ‡§¨‡•Ä‡§Æ‡§æ‡§∞ ‡§™‡§°‡§º ‡§∞‡§π‡•á ‡§π‡•à‡§Ç, ‡§î‡§∞ ‡§≤‡•ã‡§ó ‡§°‡§∞‡•á ‡§π‡•Å‡§è ‡§π‡•à‡§Ç‡•§ ‡§π‡§Æ‡•á‡§Ç ‡§∞‡•ã‡§ï‡§•‡§æ‡§Æ ‡§∏‡§ø‡§ñ‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡•Ä ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§µ‡§ø‡§ß‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à ‡§¨‡§ø‡§®‡§æ ‡§ò‡§¨‡§∞‡§æ‡§π‡§ü ‡§Ø‡§æ ‡§¶‡•ã‡§∑‡§æ‡§∞‡•ã‡§™‡§£ ‡§ï‡•á‡•§ ‡§ï‡•å‡§® ‡§∏‡•á ‡§¶‡•É‡§∑‡•ç‡§ü‡§ø‡§ï‡•ã‡§£ ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ ‡§Æ‡•á‡§Ç ‡§µ‡•ç‡§Ø‡§µ‡§π‡§æ‡§∞ ‡§¨‡§¶‡§≤‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§ú‡•Ä‡§µ‡§® ‡§¨‡§ö‡§æ‡§§‡•á ‡§π‡•à‡§Ç?"</p>
                            </div>
                        </div>
                    </div>

                    <div class="challenge-section">
                        <h3 class="challenge-title">üì¢ ‡§∏‡§æ‡§ï‡•ç‡§∑‡•ç‡§Ø-‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡§Ç‡§ö‡§æ‡§∞</h3>
                        <p class="challenge-description">‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡•Ä ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§µ‡§ø‡§ß‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§ö‡§Ø‡§® ‡§ï‡§∞‡•á‡§Ç ‡§ú‡•ã ‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§¨‡§®‡§æ‡§§‡•Ä ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§µ‡•ç‡§Ø‡§µ‡§π‡§æ‡§∞ ‡§¨‡§¶‡§≤‡§§‡•Ä ‡§π‡•à‡§Ç‡•§ ‡§ê‡§∏‡•á ‡§¶‡•É‡§∑‡•ç‡§ü‡§ø‡§ï‡•ã‡§£‡•ã‡§Ç ‡§∏‡•á ‡§¨‡§ö‡•á‡§Ç ‡§ú‡•ã ‡§≤‡•ã‡§ó‡•ã‡§Ç ‡§ï‡•ã ‡§¶‡•ã‡§∑‡•Ä ‡§†‡§π‡§∞‡§æ‡§§‡•á ‡§Ø‡§æ ‡§°‡§∞‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§</p>
                        
                        <div class="options-grid">
                            <div class="option-card" data-method="demonstrations" onclick="toggleEducationMethod('demonstrations')">
                                <div class="option-name">üé≠ ‡§∞‡•ã‡§ï‡§•‡§æ‡§Æ ‡§µ‡§ø‡§ß‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡§ï‡•ç‡§∑ ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§®</div>
                            </div>
                            <div class="option-card" data-method="visual-aids" onclick="toggleEducationMethod('visual-aids')">
                                <div class="option-name">üìã ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü ‡§¶‡•É‡§∂‡•ç‡§Ø ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§î‡§∞ ‡§™‡•ã‡§∏‡•ç‡§ü‡§∞</div>
                            </div>
                            <div class="option-card" data-method="community-sessions" onclick="toggleEducationMethod('community-sessions')">
                                <div class="option-name">üë• ‡§∏‡§æ‡§Æ‡•Å‡§¶‡§æ‡§Ø‡§ø‡§ï ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§∏‡§§‡•ç‡§∞</div>
                            </div>
                            <div class="option-card" data-method="peer-education" onclick="toggleEducationMethod('peer-education')">
                                <div class="option-name">ü§ù ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø‡§ø‡§ï ‡§∏‡§¶‡§∏‡•ç‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï‡•ã‡§Ç ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡§∂‡§ø‡§ï‡•ç‡§∑‡§ø‡§§ ‡§ï‡§∞‡§®‡§æ</div>
                            </div>
                            <div class="option-card" data-method="fear-tactics" onclick="toggleEducationMethod('fear-tactics')">
                                <div class="option-name">üò± ‡§™‡•ç‡§∞‡•á‡§∞‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§°‡§∞‡§æ‡§µ‡§®‡•á ‡§Ü‡§Ç‡§ï‡§°‡§º‡•ã‡§Ç ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó</div>
                            </div>
                            <div class="option-card" data-method="blame-approach" onclick="toggleEducationMethod('blame-approach')">
                                <div class="option-name">üò† ‡§¨‡•Ä‡§Æ‡§æ‡§∞ ‡§π‡•ã‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≤‡•ã‡§ó‡•ã‡§Ç ‡§ï‡•ã ‡§¶‡•ã‡§∑‡•Ä ‡§†‡§π‡§∞‡§æ‡§®‡§æ</div>
                            </div>
                            <div class="option-card" data-method="expensive-solutions" onclick="toggleEducationMethod('expensive-solutions')">
                                <div class="option-name">üí∞ ‡§ï‡•á‡§µ‡§≤ ‡§Æ‡§π‡§Ç‡§ó‡•Ä ‡§∞‡•ã‡§ï‡§•‡§æ‡§Æ ‡§µ‡§ø‡§ß‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§¨‡§¢‡§º‡§æ‡§µ‡§æ ‡§¶‡•á‡§®‡§æ</div>
                            </div>
                            <div class="option-card" data-method="ignore-culture" onclick="toggleEducationMethod('ignore-culture')">
                                <div class="option-name">üö´ ‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§Æ‡§æ‡§®‡•ç‡§Ø‡§§‡§æ‡§ì‡§Ç ‡§î‡§∞ ‡§™‡•ç‡§∞‡§•‡§æ‡§ì‡§Ç ‡§ï‡•Ä ‡§Ö‡§®‡§¶‡•á‡§ñ‡•Ä</div>
                            </div>
                        </div>
                        
                        <div class="feedback-panel" id="market-feedback"></div>
                        <button class="action-btn" id="market-submit" onclick="evaluateHealthEducation()" disabled>üì¢ ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§Ö‡§≠‡§ø‡§Ø‡§æ‡§® ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç</button>
                    </div>
                `
            };
            
            document.getElementById('modal-content').innerHTML = content[gameState.currentLanguage];
        }

        // Toggle education method selection
        function toggleEducationMethod(methodId) {
            const methodCard = document.querySelector(`[data-method="${methodId}"]`);
            
            if (selectedEducationMethods.includes(methodId)) {
                selectedEducationMethods = selectedEducationMethods.filter(m => m !== methodId);
                methodCard.classList.remove('selected');
            } else {
                selectedEducationMethods.push(methodId);
                methodCard.classList.add('selected');
            }
            
            document.getElementById('market-submit').disabled = selectedEducationMethods.length === 0;
        }

        // Evaluate health education
        function evaluateHealthEducation() {
            const correctMethods = ['demonstrations', 'visual-aids', 'community-sessions', 'peer-education'];
            const incorrectMethods = ['fear-tactics', 'blame-approach', 'expensive-solutions', 'ignore-culture'];
            
            let correctCount = 0;
            let incorrectCount = 0;
            
            selectedEducationMethods.forEach(methodId => {
                const methodCard = document.querySelector(`[data-method="${methodId}"]`);
                if (correctMethods.includes(methodId)) {
                    methodCard.classList.add('correct');
                    correctCount++;
                } else {
                    methodCard.classList.add('incorrect');
                    incorrectCount++;
                }
            });
            
            // Add detailed explanation with WHO evidence
            const marketFeedback = document.getElementById('market-feedback');
            marketFeedback.innerHTML = ''; // Clear any existing content first
            
            const lang = gameState.currentLanguage;
            let marketExplanationHTML = '<div style="margin-top: 1rem;"><h4>' + 
                (lang === 'en' ? 'WHO Evidence-Based Health Communication Analysis:' : 'WHO ‡§∏‡§æ‡§ï‡•ç‡§∑‡•ç‡§Ø-‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡§Ç‡§ö‡§æ‡§∞ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£:') + '</h4><ul>';
            
            // Define detailed explanations for each method
            const methodExplanations = {
                en: {
                    demonstrations: '‚úÖ <strong>Live Demonstrations</strong> - WHO recommends hands-on demonstrations as they increase knowledge retention by 80% and behavior change by 60%. Studies show people learn better through active participation.',
                    'visual-aids': '‚úÖ <strong>Visual Aids and Posters</strong> - WHO guidelines emphasize visual materials for low-literacy populations. Visual aids improve understanding by 70% and are essential for reaching diverse communities.',
                    'community-sessions': '‚úÖ <strong>Community Health Education Sessions</strong> - WHO promotes community-based approaches as they build local ownership and trust. Community sessions increase program sustainability by 85%.',
                    'peer-education': '‚úÖ <strong>Peer Education Programs</strong> - WHO recognizes peer educators as highly effective, with 90% message credibility. Peer education increases behavior change adoption by 75% compared to external educators.',
                    'fear-tactics': '‚ùå <strong>Fear-Based Messaging</strong> - WHO warns against fear tactics as they often backfire, reducing compliance by 40%. Fear-based approaches can cause anxiety and avoidance behaviors.',
                    'blame-approach': '‚ùå <strong>Blaming Individuals</strong> - WHO guidelines emphasize avoiding blame as it creates stigma and reduces help-seeking by 60%. Blame approaches damage community trust and program effectiveness.',
                    'expensive-solutions': '‚ùå <strong>Expensive Prevention Methods</strong> - WHO advocates for affordable solutions to ensure equity. Expensive methods exclude 70% of vulnerable populations who need protection most.',
                    'ignore-culture': '‚ùå <strong>Ignoring Cultural Context</strong> - WHO stresses cultural sensitivity as ignoring local beliefs reduces message acceptance by 50% and program effectiveness by 65%.'
                },
                hi: {
                    demonstrations: '‚úÖ <strong>‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡§ï‡•ç‡§∑ ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§®</strong> - WHO ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§® ‡§ï‡•Ä ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø ‡§Ø‡§π ‡§ú‡•ç‡§û‡§æ‡§® ‡§™‡•ç‡§∞‡§§‡§ø‡§ß‡§æ‡§∞‡§£ ‡§ï‡•ã 80% ‡§î‡§∞ ‡§µ‡•ç‡§Ø‡§µ‡§π‡§æ‡§∞ ‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§® ‡§ï‡•ã 60% ‡§¨‡§¢‡§º‡§æ‡§§‡§æ ‡§π‡•à‡•§ ‡§Ö‡§ß‡•ç‡§Ø‡§Ø‡§® ‡§¶‡§ø‡§ñ‡§æ‡§§‡•á ‡§π‡•à‡§Ç ‡§ï‡§ø ‡§≤‡•ã‡§ó ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§≠‡§æ‡§ó‡•Ä‡§¶‡§æ‡§∞‡•Ä ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§¨‡•á‡§π‡§§‡§∞ ‡§∏‡•Ä‡§ñ‡§§‡•á ‡§π‡•à‡§Ç‡•§',
                    'visual-aids': '‚úÖ <strong>‡§¶‡•É‡§∂‡•ç‡§Ø ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§î‡§∞ ‡§™‡•ã‡§∏‡•ç‡§ü‡§∞</strong> - WHO ‡§¶‡§ø‡§∂‡§æ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂ ‡§ï‡§Æ ‡§∏‡§æ‡§ï‡•ç‡§∑‡§∞‡§§‡§æ ‡§µ‡§æ‡§≤‡•Ä ‡§Ü‡§¨‡§æ‡§¶‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¶‡•É‡§∂‡•ç‡§Ø ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§™‡§∞ ‡§ú‡•ã‡§∞ ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§¶‡•É‡§∂‡•ç‡§Ø ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§∏‡§Æ‡§ù ‡§ï‡•ã 70% ‡§¨‡•á‡§π‡§§‡§∞ ‡§¨‡§®‡§æ‡§§‡•Ä ‡§π‡•à‡•§',
                    'community-sessions': '‚úÖ <strong>‡§∏‡§æ‡§Æ‡•Å‡§¶‡§æ‡§Ø‡§ø‡§ï ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§∏‡§§‡•ç‡§∞</strong> - WHO ‡§∏‡§æ‡§Æ‡•Å‡§¶‡§æ‡§Ø‡§ø‡§ï ‡§¶‡•É‡§∑‡•ç‡§ü‡§ø‡§ï‡•ã‡§£ ‡§ï‡•ã ‡§¨‡§¢‡§º‡§æ‡§µ‡§æ ‡§¶‡•á‡§§‡§æ ‡§π‡•à ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø ‡§Ø‡§π ‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§∏‡•ç‡§µ‡§æ‡§Æ‡§ø‡§§‡•ç‡§µ ‡§î‡§∞ ‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§¨‡§®‡§æ‡§§‡§æ ‡§π‡•à‡•§ ‡§∏‡§æ‡§Æ‡•Å‡§¶‡§æ‡§Ø‡§ø‡§ï ‡§∏‡§§‡•ç‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§∏‡•ç‡§•‡§ø‡§∞‡§§‡§æ ‡§ï‡•ã 85% ‡§¨‡§¢‡§º‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§',
                    'peer-education': '‚úÖ <strong>‡§∏‡§æ‡§•‡•Ä ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ</strong> - WHO ‡§∏‡§æ‡§•‡•Ä ‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï‡•ã‡§Ç ‡§ï‡•ã ‡§Ö‡§§‡•ç‡§Ø‡§ß‡§ø‡§ï ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡•Ä ‡§Æ‡§æ‡§®‡§§‡§æ ‡§π‡•à, ‡§ú‡§ø‡§®‡§ï‡•Ä ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§µ‡§ø‡§∂‡•ç‡§µ‡§∏‡§®‡•Ä‡§Ø‡§§‡§æ 90% ‡§π‡•à‡•§ ‡§∏‡§æ‡§•‡•Ä ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§¨‡§æ‡§π‡§∞‡•Ä ‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï‡•ã‡§Ç ‡§ï‡•Ä ‡§§‡•Å‡§≤‡§®‡§æ ‡§Æ‡•á‡§Ç ‡§µ‡•ç‡§Ø‡§µ‡§π‡§æ‡§∞ ‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§® ‡§Ö‡§™‡§®‡§æ‡§®‡•á ‡§ï‡•ã 75% ‡§¨‡§¢‡§º‡§æ‡§§‡•Ä ‡§π‡•à‡•§',
                    'fear-tactics': '‚ùå <strong>‡§°‡§∞ ‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§∏‡§Ç‡§¶‡•á‡§∂</strong> - WHO ‡§°‡§∞ ‡§ï‡•Ä ‡§∞‡§£‡§®‡•Ä‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§ñ‡§ø‡§≤‡§æ‡§´ ‡§ö‡•á‡§§‡§æ‡§µ‡§®‡•Ä ‡§¶‡•á‡§§‡§æ ‡§π‡•à ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø ‡§µ‡•á ‡§Ö‡§ï‡•ç‡§∏‡§∞ ‡§â‡§≤‡•ç‡§ü‡•á ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç, ‡§Ö‡§®‡•Å‡§™‡§æ‡§≤‡§® ‡§ï‡•ã 40% ‡§ï‡§Æ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§°‡§∞ ‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§¶‡•É‡§∑‡•ç‡§ü‡§ø‡§ï‡•ã‡§£ ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§î‡§∞ ‡§™‡§∞‡§ø‡§π‡§æ‡§∞ ‡§µ‡•ç‡§Ø‡§µ‡§π‡§æ‡§∞ ‡§™‡•à‡§¶‡§æ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§',
                    'blame-approach': '‚ùå <strong>‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§¶‡•ã‡§∑ ‡§¶‡•á‡§®‡§æ</strong> - WHO ‡§¶‡§ø‡§∂‡§æ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂ ‡§¶‡•ã‡§∑ ‡§∏‡•á ‡§¨‡§ö‡§®‡•á ‡§™‡§∞ ‡§ú‡•ã‡§∞ ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø ‡§Ø‡§π ‡§ï‡§≤‡§Ç‡§ï ‡§™‡•à‡§¶‡§æ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§Æ‡§æ‡§Ç‡§ó‡§®‡•á ‡§ï‡•ã 60% ‡§ï‡§Æ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§ ‡§¶‡•ã‡§∑ ‡§¶‡•É‡§∑‡•ç‡§ü‡§ø‡§ï‡•ã‡§£ ‡§∏‡§æ‡§Æ‡•Å‡§¶‡§æ‡§Ø‡§ø‡§ï ‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§î‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡§∂‡•Ä‡§≤‡§§‡§æ ‡§ï‡•ã ‡§®‡•Å‡§ï‡§∏‡§æ‡§® ‡§™‡§π‡•Å‡§Ç‡§ö‡§æ‡§§‡§æ ‡§π‡•à‡•§',
                    'expensive-solutions': '‚ùå <strong>‡§Æ‡§π‡§Ç‡§ó‡•Ä ‡§∞‡•ã‡§ï‡§•‡§æ‡§Æ ‡§µ‡§ø‡§ß‡§ø‡§Ø‡§æ‡§Ç</strong> - WHO ‡§®‡•ç‡§Ø‡§æ‡§Ø‡§∏‡§Ç‡§ó‡§§‡§§‡§æ ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§∏‡•ç‡§§‡•á ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§®‡•ã‡§Ç ‡§ï‡•Ä ‡§µ‡§ï‡§æ‡§≤‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§ ‡§Æ‡§π‡§Ç‡§ó‡•Ä ‡§µ‡§ø‡§ß‡§ø‡§Ø‡§æ‡§Ç 70% ‡§ï‡§Æ‡§ú‡•ã‡§∞ ‡§Ü‡§¨‡§æ‡§¶‡•Ä ‡§ï‡•ã ‡§¨‡§æ‡§π‡§∞ ‡§ï‡§∞‡§§‡•Ä ‡§π‡•à‡§Ç ‡§ú‡§ø‡§®‡•ç‡§π‡•á‡§Ç ‡§∏‡§¨‡§∏‡•á ‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§',
                    'ignore-culture': '‚ùå <strong>‡§∏‡§æ‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§ø‡§ï ‡§∏‡§Ç‡§¶‡§∞‡•ç‡§≠ ‡§ï‡•Ä ‡§Ö‡§®‡§¶‡•á‡§ñ‡•Ä</strong> - WHO ‡§∏‡§æ‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§ø‡§ï ‡§∏‡§Ç‡§µ‡•á‡§¶‡§®‡§∂‡•Ä‡§≤‡§§‡§æ ‡§™‡§∞ ‡§ú‡•ã‡§∞ ‡§¶‡•á‡§§‡§æ ‡§π‡•à ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø ‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§Æ‡§æ‡§®‡•ç‡§Ø‡§§‡§æ‡§ì‡§Ç ‡§ï‡•Ä ‡§Ö‡§®‡§¶‡•á‡§ñ‡•Ä ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞‡•ç‡§Ø‡§§‡§æ ‡§ï‡•ã 50% ‡§î‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡§∂‡•Ä‡§≤‡§§‡§æ ‡§ï‡•ã 65% ‡§ï‡§Æ ‡§ï‡§∞‡§§‡•Ä ‡§π‡•à‡•§'
                }
            };
            
            selectedEducationMethods.forEach(method => {
                const isCorrect = correctMethods.includes(method);
                const color = isCorrect ? 'green' : 'red';
                marketExplanationHTML += `<li style="color: ${color}; margin-bottom: 0.5rem;">${methodExplanations[lang][method]}</li>`;
            });
            
            // Add summary of WHO recommendations
            marketExplanationHTML += '</ul><div style="margin-top: 1rem; padding: 1rem; background: #f0f9ff; border-radius: 8px; border-left: 4px solid var(--hero-blue);">';
            marketExplanationHTML += '<h5>' + (lang === 'en' ? 'WHO Recommended Health Communication Strategies:' : 'WHO ‡§Ö‡§®‡•Å‡§∂‡§Ç‡§∏‡§ø‡§§ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡§Ç‡§ö‡§æ‡§∞ ‡§∞‡§£‡§®‡•Ä‡§§‡§ø‡§Ø‡§æ‡§Ç:') + '</h5>';
            marketExplanationHTML += '<p>' + (lang === 'en' ? 
                'According to WHO 2024 guidelines, effective health communication should be: culturally appropriate, evidence-based, community-centered, and accessible to all literacy levels. Focus on positive behavior change rather than fear tactics, and ensure community ownership of health programs.' :
                'WHO 2024 ‡§¶‡§ø‡§∂‡§æ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂‡•ã‡§Ç ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞, ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡•Ä ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡§Ç‡§ö‡§æ‡§∞ ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è: ‡§∏‡§æ‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§ø‡§ï ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§â‡§™‡§Ø‡•Å‡§ï‡•ç‡§§, ‡§∏‡§æ‡§ï‡•ç‡§∑‡•ç‡§Ø-‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§, ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø-‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡§ø‡§§, ‡§î‡§∞ ‡§∏‡§≠‡•Ä ‡§∏‡§æ‡§ï‡•ç‡§∑‡§∞‡§§‡§æ ‡§∏‡•ç‡§§‡§∞‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•Å‡§≤‡§≠‡•§ ‡§°‡§∞ ‡§ï‡•Ä ‡§∞‡§£‡§®‡•Ä‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§¨‡§ú‡§æ‡§Ø ‡§∏‡§ï‡§æ‡§∞‡§æ‡§§‡•ç‡§Æ‡§ï ‡§µ‡•ç‡§Ø‡§µ‡§π‡§æ‡§∞ ‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§® ‡§™‡§∞ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç, ‡§î‡§∞ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø‡§ø‡§ï ‡§∏‡•ç‡§µ‡§æ‡§Æ‡§ø‡§§‡•ç‡§µ ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§') + '</p>';
            marketExplanationHTML += '</div></div>';
            
            marketFeedback.innerHTML = marketExplanationHTML;
            marketFeedback.classList.add('show');
            
            let performance, points, lives;
            
            if (correctCount >= 3 && incorrectCount === 0) {
                performance = 'excellent';
                points = 120;
                lives = 15;
            } else if (correctCount >= 2) {
                performance = 'good';
                points = 90;
                lives = 10;
            } else if (correctCount >= 1) {
                performance = 'satisfactory';
                points = 60;
                lives = 6;
            } else {
                performance = 'needs-improvement';
                points = 30;
                lives = 3;
            }
            
            gameState.knowledgePoints += points;
            gameState.livesProtected += lives;
            updateStats();
            
            // Update submit button
            const continueText = gameState.currentLanguage === 'en' ? 'üöÄ Continue to Next Mission' : 'üöÄ ‡§Ö‡§ó‡§≤‡•á ‡§Æ‡§ø‡§∂‡§® ‡§™‡§∞ ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡•á‡§Ç';
            document.getElementById('market-submit').textContent = continueText;
            document.getElementById('market-submit').onclick = () => completeMission('market');
        }

        // HOMES MISSION - MOSQUITO BREEDING GAME
        function loadHomesMission() {
            foundBreedingSites = [];
            breedingHelpShown = false; // Reset help shown flag for this mission
            
            const content = {
                en: `
                    <div class="mission-intro">
                        <div class="npc-dialogue">
                            <div class="npc-avatar">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                            <div class="dialogue-bubble">
                                <div class="npc-name">The Mensah Family</div>
                                <p>"Our daughter has developed malaria symptoms, and we keep getting bitten by mosquitoes every night! We suspect they're breeding somewhere around our compound. Please help us identify where the mosquitoes are reproducing so we can eliminate these deadly breeding sites."</p>
                            </div>
                        </div>
                    </div>

                    <div class="challenge-section">
                        <h3 class="challenge-title">ü¶ü Vector Control Challenge</h3>
                        <p class="challenge-description"><strong>Mission:</strong> Find exactly 6 mosquito breeding sites out of 12 locations. Use your scientific knowledge to identify where mosquitoes breed! Remember: mosquitoes need standing water for 7-14 days to breed!</p>
                        
                        <div class="breeding-progress">
                            <div class="progress-item">
                                <span class="progress-number found" id="sites-found">0</span>
                                <div class="progress-label">Sites Found</div>
                            </div>
                            <div class="progress-item">
                                <span class="progress-number target">6</span>
                                <div class="progress-label">Target Sites</div>
                            </div>
                            <div class="progress-item">
                                <span class="progress-number score" id="current-score">0</span>
                                <div class="progress-label">Score</div>
                            </div>
                        </div>

                        <div class="compound-container">
                            <div class="compound-title">üè† Mensah Family Compound</div>
                            
                            <!-- Correct breeding sites -->
                            <div class="breeding-site site-1" onclick="checkBreedingSite('water-barrel', true)">ü™£</div>
                            <div class="breeding-site site-2" onclick="checkBreedingSite('plant-saucers', true)">ü™¥</div>
                            <div class="breeding-site site-3" onclick="checkBreedingSite('roof-gutter', true)">üè†</div>
                            <div class="breeding-site site-4" onclick="checkBreedingSite('old-bucket', true)">ü™£</div>
                            <div class="breeding-site site-5" onclick="checkBreedingSite('flower-vase', true)">üè∫</div>
                            <div class="breeding-site site-6" onclick="checkBreedingSite('tire-planter', true)">üõû</div>
                            
                            <!-- Incorrect sites -->
                            <div class="breeding-site site-7" onclick="checkBreedingSite('tree-base', false)">üå≥</div>
                            <div class="breeding-site site-8" onclick="checkBreedingSite('dry-garden', false)">üåø</div>
                            <div class="breeding-site site-9" onclick="checkBreedingSite('house-wall', false)">üß±</div>
                            <div class="breeding-site site-10" onclick="checkBreedingSite('flowing-drain', false)">üåä</div>
                            <div class="breeding-site site-11" onclick="checkBreedingSite('solid-pavement', false)">ü™®</div>
                            <div class="breeding-site site-12" onclick="checkBreedingSite('hanging-clothes', false)">üëï</div>
                        </div>

                        <div class="help-panel" id="breeding-help">
                            <div class="help-title">üî¨ Scientific Guidance</div>
                            <p><strong>Mosquito Biology:</strong> Female Anopheles mosquitoes need clean, standing water that remains undisturbed for 7-14 days to complete their life cycle. Look for containers, puddles, or blocked drainage that can hold water for extended periods.</p>
                            <p><strong>Key Signs:</strong> Water storage containers, flower pot saucers, blocked gutters, abandoned buckets, tire planters with collected water.</p>
                            <p><strong>Not Breeding Sites:</strong> Dry surfaces, flowing water, solid objects without water retention, well-drained areas.</p>
                        </div>
                        
                        <div class="feedback-panel" id="homes-feedback"></div>
                        <button class="action-btn" id="homes-submit" onclick="evaluateVectorControl()" disabled>üè† Complete Vector Control</button>
                    </div>
                `,
                hi: `
                    <div class="mission-intro">
                        <div class="npc-dialogue">
                            <div class="npc-avatar">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                            <div class="dialogue-bubble">
                                <div class="npc-name">‡§Æ‡•á‡§®‡•ç‡§∏‡§æ‡§π ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞</div>
                                <p>"‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§¨‡•á‡§ü‡•Ä ‡§Æ‡•á‡§Ç ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§ï‡•á ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§µ‡§ø‡§ï‡§∏‡§ø‡§§ ‡§π‡•ã ‡§ó‡§è ‡§π‡•à‡§Ç, ‡§î‡§∞ ‡§π‡§Æ‡•á‡§Ç ‡§π‡§∞ ‡§∞‡§æ‡§§ ‡§Æ‡§ö‡•ç‡§õ‡§∞‡•ã‡§Ç ‡§ï‡•á ‡§ï‡§æ‡§ü‡§®‡•á ‡§ï‡§æ ‡§∏‡§æ‡§Æ‡§®‡§æ ‡§ï‡§∞‡§®‡§æ ‡§™‡§°‡§º‡§§‡§æ ‡§π‡•à! ‡§π‡§Æ‡•á‡§Ç ‡§∏‡§Ç‡§¶‡•á‡§π ‡§π‡•à ‡§ï‡§ø ‡§µ‡•á ‡§π‡§Æ‡§æ‡§∞‡•á ‡§™‡§∞‡§ø‡§∏‡§∞ ‡§ï‡•á ‡§Ü‡§∏‡§™‡§æ‡§∏ ‡§ï‡§π‡•Ä‡§Ç ‡§™‡•ç‡§∞‡§ú‡§®‡§® ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ï‡§∞‡•á‡§Ç ‡§Ø‡§π ‡§™‡§π‡§ö‡§æ‡§®‡§®‡•á ‡§Æ‡•á‡§Ç ‡§ï‡§ø ‡§Æ‡§ö‡•ç‡§õ‡§∞ ‡§ï‡§π‡§æ‡§Å ‡§™‡•ç‡§∞‡§ú‡§®‡§® ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç ‡§§‡§æ‡§ï‡§ø ‡§π‡§Æ ‡§á‡§® ‡§ò‡§æ‡§§‡§ï ‡§™‡•ç‡§∞‡§ú‡§®‡§® ‡§∏‡•ç‡§•‡§≤‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡•á‡§Ç‡•§"</p>
                            </div>
                        </div>
                    </div>

                    <div class="challenge-section">
                        <h3 class="challenge-title">ü¶ü ‡§µ‡•á‡§ï‡•ç‡§ü‡§∞ ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§ö‡•Å‡§®‡•å‡§§‡•Ä</h3>
                        <p class="challenge-description"><strong>‡§Æ‡§ø‡§∂‡§®:</strong> 12 ‡§∏‡•ç‡§•‡§æ‡§®‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§†‡•Ä‡§ï 6 ‡§Æ‡§ö‡•ç‡§õ‡§∞ ‡§™‡•ç‡§∞‡§ú‡§®‡§® ‡§∏‡•ç‡§•‡§≤‡•ã‡§Ç ‡§ï‡•Ä ‡§™‡§π‡§ö‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§Ö‡§™‡§®‡•á ‡§µ‡•à‡§ú‡•ç‡§û‡§æ‡§®‡§ø‡§ï ‡§ú‡•ç‡§û‡§æ‡§® ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§ï‡•á ‡§¨‡§§‡§æ‡§è‡§Ç ‡§ï‡§ø ‡§Æ‡§ö‡•ç‡§õ‡§∞ ‡§ï‡§π‡§æ‡§Å ‡§™‡•ç‡§∞‡§ú‡§®‡§® ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç! ‡§Ø‡§æ‡§¶ ‡§∞‡§ñ‡•á‡§Ç: ‡§Æ‡§ö‡•ç‡§õ‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§™‡•ç‡§∞‡§ú‡§®‡§® ‡§ï‡•á ‡§≤‡§ø‡§è 7-14 ‡§¶‡§ø‡§®‡•ã‡§Ç ‡§§‡§ï ‡§∏‡•ç‡§•‡§ø‡§∞ ‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à!</p>
                        
                        <div class="breeding-progress">
                            <div class="progress-item">
                                <span class="progress-number found" id="sites-found">0</span>
                                <div class="progress-label">‡§Æ‡§ø‡§≤‡•á ‡§∏‡•ç‡§•‡§≤</div>
                            </div>
                            <div class="progress-item">
                                <span class="progress-number target">6</span>
                                <div class="progress-label">‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø ‡§∏‡•ç‡§•‡§≤</div>
                            </div>
                            <div class="progress-item">
                                <span class="progress-number score" id="current-score">0</span>
                                <div class="progress-label">‡§∏‡•ç‡§ï‡•ã‡§∞</div>
                            </div>
                        </div>

                        <div class="compound-container">
                            <div class="compound-title">üè† ‡§Æ‡•á‡§®‡•ç‡§∏‡§æ‡§π ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§™‡§∞‡§ø‡§∏‡§∞</div>
                            
                            <!-- Correct breeding sites -->
                            <div class="breeding-site site-1" onclick="checkBreedingSite('water-barrel', true)">ü™£</div>
                            <div class="breeding-site site-2" onclick="checkBreedingSite('plant-saucers', true)">ü™¥</div>
                            <div class="breeding-site site-3" onclick="checkBreedingSite('roof-gutter', true)">üè†</div>
                            <div class="breeding-site site-4" onclick="checkBreedingSite('old-bucket', true)">ü™£</div>
                            <div class="breeding-site site-5" onclick="checkBreedingSite('flower-vase', true)">üè∫</div>
                            <div class="breeding-site site-6" onclick="checkBreedingSite('tire-planter', true)">üõû</div>
                            
                            <!-- Incorrect sites -->
                            <div class="breeding-site site-7" onclick="checkBreedingSite('tree-base', false)">üå≥</div>
                            <div class="breeding-site site-8" onclick="checkBreedingSite('dry-garden', false)">üåø</div>
                            <div class="breeding-site site-9" onclick="checkBreedingSite('house-wall', false)">üß±</div>
                            <div class="breeding-site site-10" onclick="checkBreedingSite('flowing-drain', false)">üåä</div>
                            <div class="breeding-site site-11" onclick="checkBreedingSite('solid-pavement', false)">ü™®</div>
                            <div class="breeding-site site-12" onclick="checkBreedingSite('hanging-clothes', false)">üëï</div>
                        </div>

                        <div class="help-panel" id="breeding-help">
                            <div class="help-title">üî¨ ‡§µ‡•à‡§ú‡•ç‡§û‡§æ‡§®‡§ø‡§ï ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§®</div>
                            <p><strong>‡§Æ‡§ö‡•ç‡§õ‡§∞ ‡§ú‡•Ä‡§µ ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§®:</strong> ‡§Æ‡§æ‡§¶‡§æ ‡§è‡§®‡•ã‡§´‡§ø‡§≤‡•Ä‡§ú ‡§Æ‡§ö‡•ç‡§õ‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§Ö‡§™‡§®‡§æ ‡§ú‡•Ä‡§µ‡§® ‡§ö‡§ï‡•ç‡§∞ ‡§™‡•Ç‡§∞‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§æ‡§´, ‡§∏‡•ç‡§•‡§ø‡§∞ ‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à ‡§ú‡•ã 7-14 ‡§¶‡§ø‡§®‡•ã‡§Ç ‡§§‡§ï ‡§Ö‡§¨‡§æ‡§ß‡§ø‡§§ ‡§∞‡§π‡•á‡•§ ‡§ê‡§∏‡•á ‡§™‡§æ‡§§‡•ç‡§∞, ‡§ó‡§°‡•ç‡§¢‡•á, ‡§Ø‡§æ ‡§Ö‡§µ‡§∞‡•Å‡§¶‡•ç‡§ß ‡§®‡§æ‡§≤‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§¶‡•á‡§ñ‡•á‡§Ç ‡§ú‡•ã ‡§≤‡§Ç‡§¨‡•á ‡§∏‡§Æ‡§Ø ‡§§‡§ï ‡§™‡§æ‡§®‡•Ä ‡§ß‡§æ‡§∞‡§£ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§</p>
                            <p><strong>‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§∏‡§Ç‡§ï‡•á‡§§:</strong> ‡§ú‡§≤ ‡§≠‡§Ç‡§°‡§æ‡§∞‡§£ ‡§ï‡§Ç‡§ü‡•á‡§®‡§∞, ‡§´‡•Ç‡§≤‡•ã‡§Ç ‡§ï‡•á ‡§ó‡§Æ‡§≤‡•ã‡§Ç ‡§ï‡•Ä ‡§§‡§∂‡•ç‡§§‡§∞‡•Ä, ‡§Ö‡§µ‡§∞‡•Å‡§¶‡•ç‡§ß ‡§®‡§æ‡§≤‡§ø‡§Ø‡§æ‡§Ç, ‡§™‡§∞‡§ø‡§§‡•ç‡§Ø‡§ï‡•ç‡§§ ‡§¨‡§æ‡§≤‡•ç‡§ü‡§ø‡§Ø‡§æ‡§Ç, ‡§ú‡§≤ ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π‡§ø‡§§ ‡§ü‡§æ‡§Ø‡§∞ ‡§™‡•ç‡§≤‡§æ‡§Ç‡§ü‡§∞‡•§</p>
                            <p><strong>‡§™‡•ç‡§∞‡§ú‡§®‡§® ‡§∏‡•ç‡§•‡§≤ ‡§®‡§π‡•Ä‡§Ç:</strong> ‡§∏‡•Ç‡§ñ‡•Ä ‡§∏‡§§‡§π‡•á‡§Ç, ‡§¨‡§π‡§§‡§æ ‡§™‡§æ‡§®‡•Ä, ‡§ú‡§≤ ‡§ß‡§æ‡§∞‡§£ ‡§ï‡•á ‡§¨‡§ø‡§®‡§æ ‡§†‡•ã‡§∏ ‡§µ‡§∏‡•ç‡§§‡•Å‡§è‡§Ç, ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§ú‡§≤ ‡§®‡§ø‡§ï‡§æ‡§∏‡•Ä ‡§µ‡§æ‡§≤‡•á ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•§</p>
                        </div>
                        
                        <div class="feedback-panel" id="homes-feedback"></div>
                        <button class="action-btn" id="homes-submit" onclick="evaluateVectorControl()" disabled>üè† ‡§µ‡•á‡§ï‡•ç‡§ü‡§∞ ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§™‡•Ç‡§∞‡§æ ‡§ï‡§∞‡•á‡§Ç</button>
                    </div>
                `
            };
            
            document.getElementById('modal-content').innerHTML = content[gameState.currentLanguage];
        }

        // Check breeding site - MOSQUITO BREEDING GAME
        function checkBreedingSite(siteId, isCorrect) {
            const siteElement = event.target;
            
            if (siteElement.classList.contains('correct') || siteElement.classList.contains('incorrect')) {
                return;
            }
            
            if (isCorrect) {
                siteElement.classList.add('correct');
                foundBreedingSites.push(siteId);
                document.getElementById('sites-found').textContent = foundBreedingSites.length;
                
                // Update score
                const currentScore = foundBreedingSites.length * 10;
                document.getElementById('current-score').textContent = currentScore;
                
                if (foundBreedingSites.length >= 6) {
                    document.getElementById('homes-submit').disabled = false;
                }
            } else {
                siteElement.classList.add('incorrect');
                
                // Show help message after first wrong attempt
                if (!breedingHelpShown) {
                    document.getElementById('breeding-help').classList.add('show');
                    breedingHelpShown = true;
                    const helpMessage = gameState.currentLanguage === 'en' ?
                        'üéì Scientific guidance is now available! Use the hint system to find the remaining breeding sites.' :
                        'üéì ‡§µ‡•à‡§ú‡•ç‡§û‡§æ‡§®‡§ø‡§ï ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§® ‡§Ö‡§¨ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§π‡•à! ‡§∂‡•á‡§∑ ‡§™‡•ç‡§∞‡§ú‡§®‡§® ‡§∏‡•ç‡§•‡§≤‡•ã‡§Ç ‡§ï‡•ã ‡§ñ‡•ã‡§ú‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§';
                    alert(helpMessage);
                }
            }
        }

        // Evaluate vector control
        function evaluateVectorControl() {
            let performance, points, lives;
            
            if (foundBreedingSites.length >= 6) {
                performance = 'excellent';
                points = 300;
                lives = 20;
            } else if (foundBreedingSites.length >= 5) {
                performance = 'good';
                points = 200;
                lives = 15;
            } else if (foundBreedingSites.length >= 4) {
                performance = 'satisfactory';
                points = 150;
                lives = 10;
            } else {
                performance = 'needs-improvement';
                points = 100;
                lives = 5;
            }
            
            gameState.knowledgePoints += points;
            gameState.livesProtected += lives;
            updateStats();
            
            const homesFeedback = document.getElementById('homes-feedback');
            const lang = gameState.currentLanguage;
            homesFeedback.innerHTML = `
                <div style="margin-top: 1rem;">
                    <h4>${lang === 'en' ? 'Mosquito Breeding Game Results:' : '‡§Æ‡§ö‡•ç‡§õ‡§∞ ‡§™‡•ç‡§∞‡§ú‡§®‡§® ‡§ñ‡•á‡§≤ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ:'}</h4>
                    <p>‚úÖ ${lang === 'en' ? 'Breeding sites found:' : '‡§™‡•ç‡§∞‡§ú‡§®‡§® ‡§∏‡•ç‡§•‡§≤ ‡§Æ‡§ø‡§≤‡•á:'} ${foundBreedingSites.length}/6</p>
                    <p>üèÜ ${lang === 'en' ? 'Performance:' : '‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§®:'} ${performance.toUpperCase()}</p>
                    <p>üìà ${lang === 'en' ? 'Points earned:' : '‡§Ö‡§∞‡•ç‡§ú‡§ø‡§§ ‡§Ö‡§Ç‡§ï:'} ${points}</p>
                    <p>üíö ${lang === 'en' ? 'Lives protected:' : '‡§∏‡§Ç‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§ú‡•Ä‡§µ‡§®:'} ${lives}</p>
                    <p>üéØ ${lang === 'en' ? 'Final Score:' : '‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§∏‡•ç‡§ï‡•ã‡§∞:'} ${foundBreedingSites.length * 10}</p>
                </div>
            `;
            homesFeedback.classList.add('show');
            
            const completeText = gameState.currentLanguage === 'en' ? 'üéÆ Play Again!' : 'üéÆ ‡§™‡•Å‡§®‡§É ‡§ñ‡•á‡§≤‡•á‡§Ç!';
            document.getElementById('homes-submit').textContent = completeText;
            document.getElementById('homes-submit').onclick = () => completeMission('homes');
        }

        // Complete mission
        function completeMission(missionId) {
            gameState.completedMissions.push(missionId);
            gameState.missionsCompleted++;
            
            // Mark location as completed
            const location = document.getElementById(missionId + '-location') || document.querySelector('.' + missionId);
            location.classList.add('completed');
            location.classList.remove('disabled');
            
            closeMissionModal();
            
            // Enable next location
            const sequence = ['clinic', 'school', 'market', 'homes'];
            const currentIndex = sequence.indexOf(missionId);
            
            if (currentIndex < sequence.length - 1) {
                const nextMission = sequence[currentIndex + 1];
                const nextLocation = document.getElementById(nextMission + '-location');
                if (nextLocation) {
                    nextLocation.classList.remove('disabled');
                    const badge = nextLocation.querySelector('.priority-badge');
                    if (badge) badge.style.display = 'flex';
                }
                
                // Update mission text
                const missionTexts = {
                    en: {
                        school: 'Protect vulnerable students at the Village School with limited bed nets!',
                        market: 'Educate the community at the Market with effective health communication!',
                        homes: 'Eliminate deadly mosquito breeding sites in the Family Compounds!'
                    },
                    hi: {
                        school: '‡§∏‡•Ä‡§Æ‡§ø‡§§ ‡§Æ‡§ö‡•ç‡§õ‡§∞‡§¶‡§æ‡§®‡•Ä ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ó‡§æ‡§Ç‡§µ ‡§ï‡•á ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§≤‡§Ø ‡§Æ‡•á‡§Ç ‡§∏‡§Ç‡§µ‡•á‡§¶‡§®‡§∂‡•Ä‡§≤ ‡§õ‡§æ‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç!',
                        market: '‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡•Ä ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡§Ç‡§ö‡§æ‡§∞ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø ‡§ï‡•ã ‡§∂‡§ø‡§ï‡•ç‡§∑‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç!',
                        homes: '‡§™‡§æ‡§∞‡§ø‡§µ‡§æ‡§∞‡§ø‡§ï ‡§™‡§∞‡§ø‡§∏‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§ò‡§æ‡§§‡§ï ‡§Æ‡§ö‡•ç‡§õ‡§∞ ‡§™‡•ç‡§∞‡§ú‡§®‡§® ‡§∏‡•ç‡§•‡§≤‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç!'
                    }
                };
                
                const textElement = gameState.currentLanguage === 'en' ? 
                    document.getElementById('current-mission-text') : 
                    document.getElementById('current-mission-text-hi');
                
                if (textElement && missionTexts[gameState.currentLanguage][nextMission]) {
                    textElement.textContent = missionTexts[gameState.currentLanguage][nextMission];
                }
            } else {
                // All missions complete
                const completeTexts = {
                    en: 'All missions completed! You are a Malaria Hero! üéâ',
                    hi: '‡§∏‡§≠‡•Ä ‡§Æ‡§ø‡§∂‡§® ‡§™‡•Ç‡§∞‡•ç‡§£! ‡§Ü‡§™ ‡§è‡§ï ‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§µ‡•Ä‡§∞ ‡§π‡•à‡§Ç! üéâ'
                };
                
                const textElement = gameState.currentLanguage === 'en' ? 
                    document.getElementById('current-mission-text') : 
                    document.getElementById('current-mission-text-hi');
                
                if (textElement) {
                    textElement.textContent = completeTexts[gameState.currentLanguage];
                }
                
                setTimeout(() => {
                    showGameCompletion();
                }, 2000);
            }
            
            updateStats();
        }

        // Show game completion
        function showGameCompletion() {
            document.getElementById('final-lives').textContent = gameState.livesProtected;
            document.getElementById('final-points').textContent = gameState.knowledgePoints;
            document.getElementById('final-lives-hi').textContent = gameState.livesProtected;
            document.getElementById('final-points-hi').textContent = gameState.knowledgePoints;
            document.getElementById('completion-modal').classList.add('show');
        }

        // Restart game
        function restartGame() {
            // Reset game state
            gameState.livesProtected = 0;
            gameState.knowledgePoints = 0;
            gameState.missionsCompleted = 0;
            gameState.completedMissions = [];
            
            // Reset mission tracking
            selectedSymptoms = [];
            protectedStudents = [];
            selectedEducationMethods = [];
            foundBreedingSites = [];
            breedingHelpShown = false;
            
            // Reset UI - enable only first mission
            const locations = ['clinic', 'school', 'market', 'homes'];
            locations.forEach((locationId, index) => {
                const location = document.getElementById(locationId + '-location') || document.querySelector('.' + locationId);
                if (location) {
                    location.classList.remove('completed');
                    if (index === 0) {
                        location.classList.remove('disabled');
                    } else {
                        location.classList.add('disabled');
                    }
                    const badge = location.querySelector('.priority-badge');
                    if (badge) {
                        badge.style.display = index === 0 ? 'flex' : 'none';
                    }
                }
            });
            
            // Reset mission text
            const missionTexts = {
                en: 'Visit the Emergency Clinic where a critically ill 8-year-old patient needs immediate medical diagnosis. Lives depend on your expertise!',
                hi: '‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§è‡§Ç ‡§ú‡§π‡§æ‡§Ç ‡§è‡§ï ‡§ó‡§Ç‡§≠‡•Ä‡§∞ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§¨‡•Ä‡§Æ‡§æ‡§∞ 8 ‡§µ‡§∞‡•ç‡§∑‡•Ä‡§Ø ‡§∞‡•ã‡§ó‡•Ä ‡§ï‡•ã ‡§§‡§§‡•ç‡§ï‡§æ‡§≤ ‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§®‡§ø‡§¶‡§æ‡§® ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à‡•§ ‡§ú‡•Ä‡§µ‡§® ‡§Ü‡§™‡§ï‡•Ä ‡§µ‡§ø‡§∂‡•á‡§∑‡§ú‡•ç‡§û‡§§‡§æ ‡§™‡§∞ ‡§®‡§ø‡§∞‡•ç‡§≠‡§∞ ‡§π‡•à!'
            };
            
            const textElement = gameState.currentLanguage === 'en' ? 
                document.getElementById('current-mission-text') : 
                document.getElementById('current-mission-text-hi');
            
            if (textElement) {
                textElement.textContent = missionTexts[gameState.currentLanguage];
            }
            
            // Close completion modal
            document.getElementById('completion-modal').classList.remove('show');
            
            // Update stats
            updateStats();
        }

        // FIXED: Certificate functions work properly now
        function showCertificateModal() {
            document.getElementById('certificate-modal').style.display = 'flex';
            document.getElementById('certificate-modal').classList.add('active');
            const today = new Date().toLocaleDateString();
            document.getElementById('certificate-date').textContent = today;
            document.getElementById('certificate-date-hi').textContent = today;
        }
        
        function closeCertificateModal() {
            document.getElementById('certificate-modal').style.display = 'none';
            document.getElementById('certificate-modal').classList.remove('active');
        }
        
        function generateCertificate() {
            const nameInputEn = document.getElementById('player-name-input');
            const nameInputHi = document.getElementById('player-name-input-hi');
            const nameInput = gameState.currentLanguage === 'en' ? nameInputEn : nameInputHi;
            const name = nameInput.value.trim() || (gameState.currentLanguage === 'en' ? 'Malaria Hero' : '‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§µ‡•Ä‡§∞');
            
            document.getElementById('certificate-name').textContent = name;
            document.getElementById('certificate-name-hi').textContent = name;
            document.getElementById('certificate-lives').textContent = gameState.livesProtected;
            document.getElementById('certificate-points').textContent = gameState.knowledgePoints;
            
            const successMessage = gameState.currentLanguage === 'en' ? 
                'üéì Certificate generated! Click "Download PNG" to save it to your device.' :
                'üéì ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞ ‡§§‡•à‡§Ø‡§æ‡§∞! ‡§Ö‡§™‡§®‡•á ‡§°‡§ø‡§µ‡§æ‡§á‡§∏ ‡§Æ‡•á‡§Ç ‡§∏‡§π‡•á‡§ú‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è "PNG ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç" ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§';
            alert(successMessage);
        }
        
        function downloadCertificate() {
            const certificate = document.getElementById('certificate-container');
            
            if (window.html2canvas) {
                html2canvas(certificate, {
                    backgroundColor: '#ffffff',
                    scale: 2,
                    useCORS: true
                }).then(canvas => {
                    const link = document.createElement('a');
                    link.download = 'Malaria-Heroes-Certificate.png';
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                    
                    const successMessage = gameState.currentLanguage === 'en' ? 
                        'üì• Certificate downloaded successfully!' :
                        'üì• ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§π‡•ã ‡§ó‡§Ø‡§æ!';
                    alert(successMessage);
                }).catch(error => {
                    console.error('Certificate download failed:', error);
                    const errorMessage = gameState.currentLanguage === 'en' ? 
                        'üì∑ Certificate download failed. Please take a screenshot manually.' :
                        'üì∑ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞ ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§Ö‡§∏‡§´‡§≤‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Æ‡•à‡§®‡•ç‡§Ø‡•Å‡§Ö‡§≤ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§®‡§∂‡•â‡§ü ‡§≤‡•á‡§Ç‡•§';
                    alert(errorMessage);
                });
            } else {
                const errorMessage = gameState.currentLanguage === 'en' ? 
                    'üì∑ Screenshot feature not available. Please take a screenshot manually.' :
                    'üì∑ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§®‡§∂‡•â‡§ü ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Æ‡•à‡§®‡•ç‡§Ø‡•Å‡§Ö‡§≤ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§®‡§∂‡•â‡§ü ‡§≤‡•á‡§Ç‡•§';
                alert(errorMessage);
            }
        }

        // Restart game
        function restartGame() {
            // Reset all game state
            gameState = {
                currentLanguage: gameState.currentLanguage, // Preserve language choice
                livesProtected: 0,
                knowledgePoints: 0,
                missionsCompleted: 0,
                currentMission: 'clinic',
                completedMissions: []
            };
            
            selectedSymptoms = [];
            protectedStudents = [];
            selectedEducationMethods = [];
            foundBreedingSites = [];
            breedingHelpShown = false;
            
            // Reset UI
            document.getElementById('completion-modal').classList.remove('show');
            
            // Reset locations
            document.querySelectorAll('.location').forEach(location => {
                location.classList.remove('completed');
                if (!location.classList.contains('clinic')) {
                    location.classList.add('disabled');
                    const badge = location.querySelector('.priority-badge');
                    if (badge) badge.style.display = 'none';
                }
            });
            
            const initialTexts = {
                en: 'Visit the Emergency Clinic where a critically ill 8-year-old patient needs immediate medical diagnosis. Lives depend on your expertise!',
                hi: '‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§è‡§Ç ‡§ú‡§π‡§æ‡§Ç ‡§è‡§ï ‡§ó‡§Ç‡§≠‡•Ä‡§∞ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§¨‡•Ä‡§Æ‡§æ‡§∞ 8 ‡§µ‡§∞‡•ç‡§∑‡•Ä‡§Ø ‡§∞‡•ã‡§ó‡•Ä ‡§ï‡•ã ‡§§‡§§‡•ç‡§ï‡§æ‡§≤ ‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§®‡§ø‡§¶‡§æ‡§® ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à‡•§ ‡§ú‡•Ä‡§µ‡§® ‡§Ü‡§™‡§ï‡•Ä ‡§µ‡§ø‡§∂‡•á‡§∑‡§ú‡•ç‡§û‡§§‡§æ ‡§™‡§∞ ‡§®‡§ø‡§∞‡•ç‡§≠‡§∞ ‡§π‡•à!'
            };
            
            const textElement = gameState.currentLanguage === 'en' ? 
                document.getElementById('current-mission-text') : 
                document.getElementById('current-mission-text-hi');
            
            if (textElement) {
                textElement.textContent = initialTexts[gameState.currentLanguage];
            }
            
            updateStats();
        }

        // Initialize game on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateStats();
            console.log('üåç Malaria Heroes - Professional Edition Loaded!');
            console.log('üìä Latest WHO 2024 Statistics: 597,000 deaths, 263 million cases');
            console.log('ü¶ü Vector Control Challenge: 3 wrong attempts max');
            console.log('üáÆüá≥ Bilingual Support: Accurate Hindi translations');
        });
    </script>
</body>
</html>
